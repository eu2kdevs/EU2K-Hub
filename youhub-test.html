<!DOCTYPE html>
<html lang="hu">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="A YouHub egyesíti az összes eszközt egy helyre. Legyél képben a Statisztikáidról, láss javaslatokat többi diákoktól, sose maradj le egy óráról vagy egy dolgozatról, és legyél képben a fontos dolgokkal, a YouHub segítségével.">
  <title data-translate="pages.youhub.title">YouHub</title>
  <script>
    (function(){
      if (!document.getElementById('eu2k-page-overlay')) {
        var o = document.createElement('div');
        o.id = 'eu2k-page-overlay';
        o.style.cssText = 'position:fixed;inset:0;z-index:9999;background:#0B0F0B;border-radius:32px;opacity:1;transition:opacity 300ms ease-in-out;';
        var inner = document.createElement('div');
        inner.style.cssText = 'position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#0B0F0B;border-radius:32px;';
        var m = document.createElement('div');
        m.id = 'eu2k-overlay-mount';
        m.style.cssText = 'position:relative;width:100%;height:100%';
        inner.appendChild(m);
        o.appendChild(inner);
        document.documentElement.appendChild(o);
      }
    })();
  </script>
  <script src="/EU2K-Hub/assets/js/page-overlay-loader.js"></script>
  <link rel="stylesheet" href="youhub-test.css">
  <link rel="icon" href="/EU2K-Hub/favicon.ico">
  <!-- START Formbricks Surveys -->
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap');

    body,
    * {
      font-family: "Roboto", sans-serif;
      font-optical-sizing: auto;
      font-weight: 400;
      font-style: normal;
      font-variation-settings: "wdth" 100;
    }
  </style>
  <script src="/EU2K-Hub/assets/js/permissions.js"></script>
  <script src="/EU2K-Hub/assets/js/translations.js"></script>
  <script src="/EU2K-Hub/assets/js/welcome-screen.js"></script>
  <script src="/EU2K-Hub/assets/js/auth-state.js"></script>
  <script src="/EU2K-Hub/assets/js/test_firebase.js" type="module"></script>
<script src="/EU2K-Hub/assets/js/firebase-performance.js" type="module"></script>
  <script src="/EU2K-Hub/assets/js/first-input-delay.js"></script>
  <script type="importmap">
    {
      "imports": {
        "@material/web/": "https://esm.run/@material/web/"
      }
    }
  </script>
  <script type="module">
    import '@material/web/all.js';
    import { styles as typescaleStyles } from '@material/web/typography/md-typescale-styles.js';

    document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
  </script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBRRVx6BtQtCDKjFYA8yh9qYrcUONmkkwI",
      authDomain: "eu2k-hub.firebaseapp.com",
      projectId: "eu2k-hub",
      storageBucket: "eu2k-hub.firebasestorage.app",
      messagingSenderId: "560244867055",
      appId: "1:560244867055:web:3cd51b85baead94989001a",
      measurementId: "G-2JDPR089WD"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app);

    // Make db globally available
    window.db = db;

    // Import Firestore debug module
    import('./assets/js/firestore-debug.js').catch(err => {
      console.warn('Firestore debug module not loaded:', err);
    });
  </script>

  <script>
    // Diagram adatok és logika
    function getCurrentMonth() {
      // Megbízható netes idő szerzése (egyszerűsített verzió)
      return new Date().getMonth() + 1; // 1-12
    }

    function generateDiagramData() {
      // Példa adatok (1.00-5.00 skála)
      const sampleData = [2.45, 3.20, 3.80, 4.10, 3.95, 4.25, 4.50, 4.20, 4.35, 4.60, 4.80];
      return sampleData;
    }

    function generateMonthsArray(currentMonth) {
      const months = [];
      // Az aktuális hónap mindig a 9. helyen legyen (index 8)
      for (let i = -8; i <= 2; i++) {
        let month = currentMonth + i;
        if (month <= 0) month += 12;
        if (month > 12) month -= 12;
        months.push(month);
      }
      return months;
    }

    function createDiagramBars() {
      const currentMonth = getCurrentMonth();
      const months = generateMonthsArray(currentMonth);
      const data = generateDiagramData();
      const diagramBars = document.getElementById('diagramBars');

      // Hónapok frissítése
      const monthElements = document.querySelectorAll('.diagram-months span');
      monthElements.forEach((element, index) => {
        element.textContent = months[index];
      });

      // Oszlopok generálása
      diagramBars.innerHTML = '';

      data.forEach((value, index) => {
        const bar = document.createElement('div');
        bar.className = 'diagram-bar';

        // Magasság számítása (1.00-5.00 skála -> 0-100%)
        const height = ((value - 1.0) / 4.0) * 100;
        bar.style.height = `${height}%`;

        // Szín meghatározása
        if (index === 8) { // Aktuális hónap (9. pozíció)
          bar.classList.add('current-month');
        } else if (index >= 4 && index < 8) { // 4 hónap visszamenőleg
          bar.classList.add('recent-months');
        } else if (index < 4) { // Régebbi hónapok
          bar.classList.add('old-months');
        } else { // Előrejelzett hónapok (index > 8)
          bar.classList.add('predicted');

          // Tooltip hozzáadása az előrejelzett oszlopokhoz
          const tooltip = document.createElement('div');
          tooltip.className = 'diagram-tooltip';
          tooltip.textContent = window.translationManager?.translate('pages.youhub.prediction_tooltip') || 'Ez csak előrejelzés';
          bar.appendChild(tooltip);
        }

        diagramBars.appendChild(bar);
      });
    }

    // Connected Button Group logika
    function initButtonGroup() {
      const buttons = document.querySelectorAll('.button-group-item');

      buttons.forEach((button, index) => {
        button.addEventListener('click', function (e) {
          e.preventDefault();

          // Eltávolítjuk az active osztályt minden gombról
          buttons.forEach(btn => {
            btn.classList.remove('active');
            const icon = btn.querySelector('.button-group-icon');
            const iconName = btn.dataset.icon;
            // Visszaállítjuk az eredeti ikont
            icon.src = `/EU2K-Hub/assets/${iconName}.svg`;
          });

          // Hozzáadjuk az active osztályt az aktuális gombhoz
          this.classList.add('active');
          const activeIcon = this.querySelector('.button-group-icon');
          const activeIconName = this.dataset.icon;
          // Aktív ikon beállítása
          activeIcon.src = `/EU2K-Hub/assets/${activeIconName}_active.svg`;

          // Border-radius frissítése
          updateBorderRadius();

          // Tartalom váltása
          switchContent(activeIconName);
        });
      });

      // Kezdeti border-radius beállítása
      updateBorderRadius();
    }

    function updateBorderRadius() {
      const buttons = document.querySelectorAll('.button-group-item');

      buttons.forEach((button, index) => {
        // Eltávolítjuk az összes pozíció osztályt
        button.classList.remove('btn-first', 'btn-middle', 'btn-last');

        const isActive = button.classList.contains('active');

        if (!isActive) {
          // Első gomb
          if (index === 0) {
            button.classList.add('btn-first');
          }
          // Utolsó gomb
          else if (index === buttons.length - 1) {
            button.classList.add('btn-last');
          }
          // Középső gomb(ok)
          else {
            button.classList.add('btn-middle');
          }
        }
      });
    }

    // Tartalom váltás funkció
    function switchContent(contentType) {
      // Minden kártya elrejtése
      document.getElementById('monthlyStatsCard').style.display = 'none';
      document.getElementById('myStrengthsCard').style.display = 'none';
      document.getElementById('myStreakCard').style.display = 'none';

      // Megfelelő kártya megjelenítése
      switch (contentType) {
        case 'month_score':
          document.getElementById('monthlyStatsCard').style.display = 'flex';
          break;
        case 'strength':
          document.getElementById('myStrengthsCard').style.display = 'flex';
          break;
        case 'fire':
          document.getElementById('myStreakCard').style.display = 'flex';
          break;
      }
    }

    // Értesítések kezelése
    function initNotifications() {
      const notificationItems = document.querySelectorAll('.notification-item');
      const detailAvatar = document.querySelector('.detail-avatar');
      const detailTitle = document.querySelector('.detail-title');
      const detailDesc = document.querySelector('.detail-desc');

      const notifications = [
        {
          avatarLight: '/EU2K-Hub/assets/man_light.svg',
          avatarDark: '/EU2K-Hub/assets/man_dark.svg',
          title: 'Férfi Példanév',
          shortDesc: '02.12-én nem kell első órába jönnöd.',
          longDesc: '02.12-én Tanítás nélküli Munkanap lesz, emiatt nem kell jönnöd az iskolába. Nem kell visszapótolni a napot.'
        },
        {
          avatarLight: '/EU2K-Hub/assets/woman_light.svg',
          avatarDark: '/EU2K-Hub/assets/woman_dark.svg',
          title: 'Női Példanév',
          shortDesc: '02.12-én nem kell első órába jönnöd.',
          longDesc: '02.12-én Tanítás nélküli Munkanap lesz, emiatt nem kell jönnöd az iskolába. Nem kell visszapótolni a napot.'
        },
        {
          avatarLight: '/EU2K-Hub/assets/woman_light.svg',
          avatarDark: '/EU2K-Hub/assets/woman_dark.svg',
          title: 'Női Példanév',
          shortDesc: '02.12-én nem kell első órába jönnöd.',
          longDesc: '02.12-én Tanítás nélküli Munkanap lesz, emiatt nem kell jönnöd az iskolába. Nem kell visszapótolni a napot.'
        }
      ];

      notificationItems.forEach((item, index) => {
        item.addEventListener('click', function () {
          // Eltávolítjuk az active osztályt minden elemről
          notificationItems.forEach((ni, i) => {
            ni.classList.remove('active');
            // Visszaállítjuk a light ikont
            const avatar = ni.querySelector('.notification-avatar');
            avatar.src = notifications[i].avatarLight;
          });

          // Hozzáadjuk az active osztályt az aktuális elemhez
          this.classList.add('active');

          // Beállítjuk a dark ikont az aktív elemhez
          const activeAvatar = this.querySelector('.notification-avatar');
          activeAvatar.src = notifications[index].avatarDark;

          // Frissítjük a részletes nézetet
          const notification = notifications[index];
          detailAvatar.src = notification.avatarLight;
          detailTitle.textContent = notification.title;
          detailDesc.textContent = notification.longDesc;
        });
      });
    }

    // Kategória gombok kezelése
    function initCategoryButtons() {
      const categoryButtons = document.querySelectorAll('.category-btn');

      categoryButtons.forEach(button => {
        button.addEventListener('click', function () {
          // Eltávolítjuk az active osztályt minden gombról
          categoryButtons.forEach(btn => btn.classList.remove('active'));

          // Hozzáadjuk az active osztályt az aktuális gombhoz
          this.classList.add('active');
        });
      });
    }

    // Scrollbar megjelenítése görgetéskor
    function initScrollbarVisibility() {
      const mainContent = document.querySelector('.main-content');
      let scrollTimeout;

      mainContent.addEventListener('scroll', function () {
        // Hozzáadjuk a scrolling osztályt
        mainContent.classList.add('scrolling');

        // Töröljük az előző timeout-ot
        clearTimeout(scrollTimeout);

        // 2 másodperc után eltávolítjuk a scrolling osztályt
        scrollTimeout = setTimeout(function () {
          mainContent.classList.remove('scrolling');
        }, 2000);
      });
    }

    // Scrollbar megjelenítése görgetéskor
    function initScrollbarVisibility() {
      const mainContent = document.querySelector('.main-content');
      let scrollTimeout;

      if (mainContent) {
        mainContent.addEventListener('scroll', function () {
          // Hozzáadjuk a scrolling osztályt
          mainContent.classList.add('scrolling');

          // Töröljük az előző timeout-ot
          clearTimeout(scrollTimeout);

          // 2 másodperc után eltávolítjuk a scrolling osztályt
          scrollTimeout = setTimeout(function () {
            mainContent.classList.remove('scrolling');
          }, 2000);
        });
      }
    }

    // Naptár funkcionalitás
    let currentCalendarDate = new Date();
    let isEditing = false;

    // Gemini AI API konfiguráció
    const GEMINI_API_KEY = 'no peeking bruh';
    const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent';

    // Gemini AI segítségével javítja a dátum formátumot
    async function fixDateWithGemini(userInput) {
      try {
        const prompt = `A felhasználó ezt írta be dátumként: "${userInput}"
        
Kérlek javítsd ki és alakítsd át pontosan erre a formátumra: "Hónap Nap."
Például: "Július 31."

Szabályok:
- Csak magyar hónapneveket használj: Január, Február, Március, Április, Május, Június, Július, Augusztus, Szeptember, Október, November, December
- A hónap neve nagy betűvel kezdődjön
- A nap száma után pont legyen
- Ha nem értelmezhető a dátum, válaszolj "HIBA"-val

Válaszolj CSAK a javított dátummal, semmi mással!`;

        const response = await fetch(GEMINI_API_URL, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
            'X-goog-api-key': GEMINI_API_KEY
          },
          body: JSON.stringify({
            contents: [{
              parts: [{
                text: prompt
              }]
            }]
          })
        });

        if (!response.ok) {
          throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        const generatedText = data.candidates[0].content.parts[0].text.trim();

        console.log(`Xelp javítás: "${userInput}" → "${generatedText}"`);

        if (generatedText === "HIBA") {
          return null;
        }

        return generatedText;
      } catch (error) {
        console.error('Xelp API hiba:', error);
        return null;
      }
    }

    // Teszt: ellenőrizzük különböző dátumokat
    const testDays = ['Vasárnap', 'Hétfő', 'Kedd', 'Szerda', 'Csütörtök', 'Péntek', 'Szombat'];

    // Tesztelünk néhány ismert dátumot
    console.log('=== DÁTUM TESZT ===');
    const testDates = [
      new Date(2024, 11, 1), // December 1, 2024
      new Date(2025, 11, 1), // December 1, 2025  
      new Date(2024, 6, 30), // Július 30, 2024 (mai dátum)
    ];

    testDates.forEach(date => {
      const dayName = testDays[date.getDay()];
      console.log(`${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} = ${dayName}`);
    });

    function initCalendar() {
      updateCalendarDisplay();

      // Hónap navigáció
      document.getElementById('prevMonth').addEventListener('click', function () {
        currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
        updateCalendarDisplay();
      });

      document.getElementById('nextMonth').addEventListener('click', function () {
        currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
        updateCalendarDisplay();
      });

      // Edit gomb funkcionalitás
      document.getElementById('editButton').addEventListener('click', function () {
        startDateEdit();
      });

      // Input mező kezelése
      const dateInput = document.getElementById('dateInput');
      dateInput.addEventListener('input', function (e) {
        handleDateInput(e.target.value);
      });

      dateInput.addEventListener('keydown', function (e) {
        if (e.key === 'Enter') {
          finishDateEdit();
        } else if (e.key === 'Escape') {
          cancelDateEdit();
        } else if (e.key === 'Tab') {
          e.preventDefault();
          const ghostElement = document.getElementById('autocompleteGhost');
          if (ghostElement.textContent) {
            // Megkeressük a teljes javaslatot
            const monthsAutocomplete = [
              'Január', 'Február', 'Március', 'Április', 'Május', 'Június',
              'Július', 'Augusztus', 'Szeptember', 'Október', 'November', 'December'
            ];
            const input = dateInput.value.toLowerCase().trim();
            for (let month of monthsAutocomplete) {
              if (month.toLowerCase().startsWith(input)) {
                dateInput.value = month + ' ';
                ghostElement.textContent = '';
                break;
              }
            }
          }
        }
      });

      dateInput.addEventListener('blur', function () {
        finishDateEdit();
      });
    }

    function startDateEdit() {
      const currentDateSpan = document.getElementById('currentDate');
      const inputContainer = document.getElementById('inputContainer');
      const dateInput = document.getElementById('dateInput');

      isEditing = true;
      currentDateSpan.style.display = 'none';
      inputContainer.style.display = 'inline-block';
      dateInput.value = '';
      dateInput.focus();
    }

    function handleDateInput(value) {
      const monthsAutocomplete = [
        'Január', 'Február', 'Március', 'Április', 'Május', 'Június',
        'Július', 'Augusztus', 'Szeptember', 'Október', 'November', 'December'
      ];

      const ghostElement = document.getElementById('autocompleteGhost');

      // Ha üres, töröljük a ghost szöveget
      if (!value.trim()) {
        ghostElement.innerHTML = '';
        return;
      }

      // Autocomplete logika
      const input = value.toLowerCase().trim();
      let suggestion = '';

      // Keresünk egyező hónapot
      for (let month of monthsAutocomplete) {
        if (month.toLowerCase().startsWith(input)) {
          suggestion = month;
          break;
        }
      }

      // Ha van javaslat és még nem teljes a hónap neve
      if (suggestion && input.length > 0 && input.length < suggestion.length) {
        const remainingPart = suggestion.substring(input.length);

        // Számoljuk ki a beírt szöveg szélességét
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        context.font = '500 1.2rem Roboto';
        const textWidth = context.measureText(value).width;

        // Pozicionáljuk a ghost szöveget a beírt szöveg után + természetes hely
        const containerWidth = dateInput.offsetWidth;
        const centerOffset = containerWidth / 2;
        const ghostPosition = centerOffset - (textWidth / 2) + textWidth + 1; // +1px természetes betűköz

        ghostElement.style.left = ghostPosition + 'px';
        ghostElement.style.transform = 'none';
        ghostElement.style.textAlign = 'left';
        ghostElement.textContent = remainingPart;
      } else {
        ghostElement.textContent = '';
        ghostElement.style.left = '50%';
        ghostElement.style.transform = 'translateX(-50%)';
        ghostElement.style.textAlign = 'center';
      }
    }

    async function finishDateEdit() {
      const dateInput = document.getElementById('dateInput');
      const inputValue = dateInput.value.trim();

      if (inputValue) {
        // Először próbáljuk meg közvetlenül
        let success = parseDateInput(inputValue);

        if (!success) {
          console.log('Közvetlen parsing sikertelen, Xelp segíteni próbál...');

          // Ha nem sikerült, kérjük Xelp segítségét
          const fixedDate = await fixDateWithGemini(inputValue);

          if (fixedDate) {
            console.log(`Gemini javította: "${inputValue}" → "${fixedDate}"`);
            success = parseDateInput(fixedDate);

            if (success) {
              console.log('Xelp segítségével sikerült!');
            } else {
              console.log('Még Xelp próbálkozsa után sem jó');
            }
          } else {
            console.log('Xelp nem tudta javítani');
          }
        }

        if (!success) {
          console.log('Érvénytelen dátum formátum - sem közvetlen, sem AI segítséggel');
        }
      }

      cancelDateEdit();
    }

    function cancelDateEdit() {
      const currentDateSpan = document.getElementById('currentDate');
      const inputContainer = document.getElementById('inputContainer');
      const dateInput = document.getElementById('dateInput');
      const ghostElement = document.getElementById('autocompleteGhost');

      isEditing = false;
      currentDateSpan.style.display = 'inline';
      inputContainer.style.display = 'none';
      dateInput.value = '';
      ghostElement.textContent = '';
      ghostElement.style.left = '50%';
      ghostElement.style.transform = 'translateX(-50%)';
    }

    function parseDateInput(input) {
      const months = [
        'Január', 'Február', 'Március', 'Április', 'Május', 'Június',
        'Július', 'Augusztus', 'Szeptember', 'Október', 'November', 'December'
      ];

      // Regex a "Hónap nap" formátum felismerésére (ponttal vagy anélkül)
      // [a-záéíóöőúüű] - magyar ékezetes betűket is felismeri
      const dateRegex = /^([a-záéíóöőúüű]+)\s+(\d{1,2})\.?$/i;
      const match = input.match(dateRegex);

      if (match) {
        const monthName = match[1];
        const day = parseInt(match[2]);

        // Hónap keresése (részleges egyezés is elfogadható)
        let monthIndex = -1;
        for (let i = 0; i < months.length; i++) {
          if (months[i].toLowerCase().startsWith(monthName.toLowerCase())) {
            monthIndex = i;
            break;
          }
        }

        if (monthIndex !== -1) {
          // Ellenőrizzük, hogy a nap érvényes-e az adott hónapban
          const currentYear = currentCalendarDate.getFullYear();
          const daysInMonth = new Date(currentYear, monthIndex + 1, 0).getDate();

          if (day >= 1 && day <= daysInMonth) {
            // Beállítjuk az új dátumot
            currentCalendarDate.setFullYear(currentYear);
            currentCalendarDate.setMonth(monthIndex);
            selectedDay = day;

            // Frissítjük a kijelzést
            updateCalendarDisplay();
            return true;
          }
        }
      }
      return false;
    }

    // Globális változók a kiválasztott dátumhoz
    let selectedDay = new Date().getDate();

    function updateCalendarDisplay() {
      const months = [
        'Január', 'Február', 'Március', 'Április', 'Május', 'Június',
        'Július', 'Augusztus', 'Szeptember', 'Október', 'November', 'December'
      ];
      const days = ['Vasárnap', 'Hétfő', 'Kedd', 'Szerda', 'Csütörtök', 'Péntek', 'Szombat'];

      // Aktuális kiválasztott dátum - FONTOS: JavaScript Date hónapok 0-tól kezdődnek!
      const selectedDate = new Date(currentCalendarDate.getFullYear(), currentCalendarDate.getMonth(), selectedDay);

      // Debug: ellenőrizzük a dátumot
      console.log(`Kiválasztott dátum: ${selectedDate.getFullYear()}-${selectedDate.getMonth() + 1}-${selectedDate.getDate()}`);
      console.log(`Nap neve: ${days[selectedDate.getDay()]}`);

      // Felső dátum frissítése
      const currentDateElement = document.getElementById('currentDate');
      if (currentDateElement) {
        const selectedMonth = months[currentCalendarDate.getMonth()];
        currentDateElement.textContent = `${selectedMonth} ${selectedDay}.`;
      }

      // Hónap/év frissítése (navigálható)
      const monthYearElement = document.getElementById('monthYear');
      if (monthYearElement) {
        const month = months[currentCalendarDate.getMonth()];
        const year = currentCalendarDate.getFullYear();
        monthYearElement.textContent = `${month} ${year}`;
      }

      // Nap neve a kiválasztott dátumban - JavaScript Date.getDay() megbízható
      const dayNameElement = document.getElementById('dayName');
      if (dayNameElement) {
        const dayOfWeek = selectedDate.getDay(); // 0 = Vasárnap, 1 = Hétfő, stb.
        const dayName = days[dayOfWeek];
        dayNameElement.textContent = dayName;
      }
    }

    // Oldal betöltésekor inicializálás
    document.addEventListener('DOMContentLoaded', function () {
      createDiagramBars();
      initButtonGroup();
      initNotifications();
      initCategoryButtons();
      initScrollbarVisibility();
      initCalendar();
    });
  </script>
  <script src="/EU2K-Hub/assets/js/permissions.js"></script>
  <script src="/EU2K-Hub/assets/js/translations.js"></script>
  <script type="module" src="/EU2K-Hub/assets/js/new-things-popup.js"></script>
</head>

<body>
  <div class="app-bg">
    <aside class="sidebar">
      <nav class="nav-menu">
        <button class="nav-item list-button nav-item-list" type="button" aria-label="Menü">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/menu.svg" class="nav-icon" alt="Menü">
          </div>
          <span data-translate="navigation.menu">Menü</span>
        </button>
        <a class="nav-item" href="index.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/home.svg" class="nav-icon" alt="Otthon">
          </div>
          <span data-translate="navigation.home">Otthon</span>
        </a>
        <a class="nav-item" href="qr-code.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/qr_code.svg" class="nav-icon" alt="QR-Kód">
          </div>
          <span data-translate="navigation.qr">QR-Kód</span>
        </a>
        <a class="nav-item active" href="youhub.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/youhub.svg" class="nav-icon" alt="YouHub">
          </div>
          <span data-translate="navigation.youhub">YouHub</span>
        </a>
        <a class="nav-item" href="event_hub.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/event_hub.svg" class="nav-icon" alt="Event Hub">
          </div>
          <span data-translate="navigation.event_hub">Event Hub</span>
        </a>
      </nav>
    </aside>
    <script>
      (function() {
        const sidebar = document.querySelector('.sidebar');
        const toggleButton = document.querySelector('.list-button');
        if (sidebar && toggleButton) {
          toggleButton.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            const icon = toggleButton.querySelector('.nav-icon');
            if (icon) {
              const isOpen = sidebar.classList.contains('open');
              icon.src = isOpen ? '/EU2K-Hub/assets/navbar/menu_open.svg' : '/EU2K-Hub/assets/navbar/menu.svg';
            }
          });
        }
        function markActiveNavItem() {
          const currentPath = window.location.pathname.replace(/\/$/, '');
          document.querySelectorAll('.nav-menu .nav-item[href]').forEach(link => {
            try {
              const linkPath = new URL(link.getAttribute('href'), window.location.origin).pathname.replace(/\/$/, '');
              const isHomeAlias = currentPath === '/EU2K-Hub/' && linkPath === '/EU2K-Hub/index.html';
              if (linkPath === currentPath || isHomeAlias) {
                link.classList.add('active');
              } else {
                link.classList.remove('active');
              }
            } catch (e) {}
          });
        }
        function updateNavIcons() {
          document.querySelectorAll('.nav-item:not(.list-button) .nav-icon').forEach(img => {
            const item = img.closest('.nav-item');
            if (!item) return;
            const isActive = item.classList.contains('active');
            const src = img.getAttribute('src') || '';
            if (src.includes('/assets/navbar/')) {
              if (isActive && !src.includes('/assets/navbar/filled/')) {
                img.setAttribute('src', src.replace('/assets/navbar/', '/assets/navbar/filled/'));
              } else if (!isActive && src.includes('/assets/navbar/filled/')) {
                img.setAttribute('src', src.replace('/assets/navbar/filled/', '/assets/navbar/'));
              }
            }
          });
        }
        document.addEventListener('DOMContentLoaded', () => {
          markActiveNavItem();
          updateNavIcons();
        });
      })();
    </script>
    <main class="main-area">
      <div class="main-content">
        <header class="header">
          <div class="welcome-container">
            <img src="/EU2K-Hub/assets/navbar/youhub.svg" class="welcome-icon" alt="YouHub Icon">
            <h1 class="welcome-text" data-translate="pages.youhub.title">YouHub</h1>
          </div>
          <div class="header-icons">
            <a href="/EU2K-Hub/settings/settings.html" class="header-icon-link">
              <img src="/EU2K-Hub/assets/edit_green.svg" class="header-icon" alt="Edit">
            </a>
            <a href="/EU2K-Hub/system/account.html" class="header-icon-link">
              <img src="/EU2K-Hub/assets/account_icon.svg" class="header-icon" alt="Account">
            </a>
            <a href="/EU2K-Hub/settings/settings.html" class="header-icon-link">
              <img src="/EU2K-Hub/assets/settings_icon.svg" class="header-icon" alt="Settings">
            </a>
          </div>
        </header>
        <div class="youhub-container">
          <!-- Türkiz Statisztikák Kártya -->
          <div class="stats-card-container">
            <!-- AA Kártya (bal oldal) -->
            <div class="stats-card-aa">
              <div class="stats-header">
                <img src="/EU2K-Hub/assets/my_class.svg" class="stats-icon" alt="Osztályom">
                <span class="stats-title" data-translate="pages.youhub.stats_title">Osztályom</span>
              </div>
              <!-- Connected Button Group -->
              <div class="button-group">
                <a href="#" class="button-group-item active" data-icon="month_score" data-index="0">
                  <img src="/EU2K-Hub/assets/class_stats.svg" class="button-group-icon" alt="Osztály Hónapja">
                  <span data-translate="pages.youhub.monthly_stats">Osztály Hónapja</span>
                </a>
                <a href="#" class="button-group-item" data-icon="strength" data-index="1">
                  <img src="/EU2K-Hub/assets/class_suggestions.svg" class="button-group-icon" alt="Osztály Javaslatai">
                  <span data-translate="pages.youhub.strengths">Osztály Javaslatai</span>
                </a>
                <a href="#" class="button-group-item" data-icon="fire" data-index="2">
                  <img src="/EU2K-Hub/assets/class_info.svg" class="button-group-icon" alt="Indormációk">
                  <span data-translate="pages.youhub.streak">Információk</span>
                </a>
              </div>

              <!-- Monthly Stats Card (Hónapom) -->
              <div class="subject-card" id="monthlyStatsCard">
                <div class="subject-name">Osztály Havi Átlaga</div>
                <div class="diagram-container">
                  <div class="diagram-content">
                    <div class="diagram-labels">
                      <span>5.00</span>
                      <span>4.00</span>
                      <span>3.00</span>
                      <span>2.00</span>
                      <span>1.00</span>
                    </div>
                    <div class="diagram-chart">
                      <div class="diagram-bars" id="diagramBars">
                        <!-- Dinamikusan generált oszlopok -->
                      </div>
                      <div class="diagram-months">
                        <span>2</span><span>3</span><span>4</span><span>5</span><span>6</span><span>7</span><span>8</span><span>9</span><span>10</span><span>11</span><span>12</span>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="arrow-container disabled">
                  <img src="/EU2K-Hub/assets/arrow_forward.svg" class="arrow-icon" alt="Tovább">
                </div>
              </div>

              <!-- My Strengths Card (Erősségeim) -->
              <div class="my-strengths-card" id="myStrengthsCard" style="display: none;">
                <div class="strengths-title" data-translate="pages.youhub.learning_strengths">Tanulási Erősségeim</div>
                <div class="strengths-content">
                  <div class="strength-items">
                    <div class="strength-item best">
                      <img src="/EU2K-Hub/assets/badge.svg" class="strength-icon" alt="Legjobb">
                      <div class="strength-text">
                        <div class="strength-label" data-translate="pages.youhub.best_subject_label">Legjobb tantárgyad eddig</div>
                        <div class="strength-subject">Irodalom</div>
                      </div>
                    </div>
                    <div class="strength-item worst">
                      <img src="/EU2K-Hub/assets/mad.svg" class="strength-icon" alt="Legrosszabb">
                      <div class="strength-text">
                        <div class="strength-label" data-translate="pages.youhub.worst_subject_label">Legrosszabb tantárgyad eddig</div>
                        <div class="strength-subject">Matematika</div>
                      </div>
                    </div>
                  </div>
                  <div class="progress-section">
                    <div class="progress-title">Idei célkitűzésem</div>
                    <div class="progress-details">
                      <span><strong>Cél:</strong> Matekból 3.5 lenni</span>
                      <span class="separator">-</span>
                      <span><strong>Start:</strong> 2.5</span>
                      <span class="separator">-</span>
                      <span><strong>Mostani:</strong> 3.4</span>
                    </div>
                    <div class="progress-bar">
                      <md-linear-progress value="0.5"></md-linear-progress>
                    </div>
                    <div class="progress-labels">
                      <span>30%</span>
                      <span>50%</span>
                      <span>80%</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- My Streak Card (Szériám) -->
              <div class="my-streak-card" id="myStreakCard" style="display: none;">
                <div class="streak-title" data-translate="pages.youhub.streak">Szériám</div>
                <div class="streak-content">
                  <!-- Bal oszlop: Nagy tűz és szám -->
                  <div class="streak-left">
                    <img src="/EU2K-Hub/assets/fire.svg" class="streak-fire-icon" alt="Tűz">
                    <div class="streak-number">8</div>
                  </div>

                  <!-- Jobb oszlop: Színes tűz szintek, szöveg, gomb -->
                  <div class="streak-right">
                    <div class="streak-levels">
                      <div class="streak-level basic">
                        <img src="/EU2K-Hub/assets/fire.svg" class="level-icon" alt="Alap">
                        <span>Alap</span>
                      </div>
                      <div class="streak-level easy">
                        <img src="/EU2K-Hub/assets/fire_orange.svg" class="level-icon" alt="Könnyű">
                        <span>Könnyű</span>
                      </div>
                      <div class="streak-level medium">
                        <img src="/EU2K-Hub/assets/fire_green.svg" class="level-icon" alt="Közepes">
                        <span>Közepes</span>
                      </div>
                      <div class="streak-level hard">
                        <img src="/EU2K-Hub/assets/fire_red.svg" class="level-icon" alt="Nehéz">
                        <span>Nehéz</span>
                      </div>
                      <div class="streak-level extreme">
                        <img src="/EU2K-Hub/assets/fire_purple.svg" class="level-icon" alt="Extrém">
                        <span>Extrém</span>
                      </div>
                    </div>
                    <div class="streak-progress">
                      <md-linear-progress value="0.5"></md-linear-progress>
                    </div>
                    <div class="streak-message">
                      <div class="streak-title-msg">Gyerünk! Csak így tovább!</div>
                      <div class="streak-subtitle">Ha így folytatod, akár 2x olyan jól teljesíthetsz, mint amit elvársz
                        magadtól!</div>
                    </div>
                    <button class="streak-restart-btn">
                      <img src="/EU2K-Hub/assets/trash_red.svg" class="restart-icon" alt="Újrakezdés">
                      <span>Széria újrakezdése</span>
                    </button>
                  </div>
                </div>
              </div>


            </div>

            <!-- BB Kártya (jobb fent) -->
            <div class="stats-card-bb">
              <div class="cached-header">
                <svg class="-icon" xmlns="http://www.w3.org/2000/svg" height="/.cache/32px" viewBox="0 -960 960 960"
                  width="32px" fill="#ACF5FE" style="
    rotate: 90deg;
">
                  <path
                    d="M482-160q-134 0-228-93t-94-227v-7l-64 64-56-56 160-160 160 160-56 56-64-64v7q0 100 70.5 170T482-240q26 0 51-6t49-18l60 60q-38 22-78 33t-82 11Zm278-161L600-481l56-56 64 64v-7q0-100-70.5-170T478-720q-26 0-51 6t-49 18l-60-60q38-22 78-33t82-11q134 0 228 93t94 227v7l64-64 56 56-160 160Z">
                  </path>
                </svg>
                <span class="cached-text">
                  <span class="cached-line1">Legutóbb</span>
                  <span class="cached-line2">frissítve: Október</span>
                </span>
              </div>
            </div>

            <!-- CC Kártya (jobb lent) -->
            <div class="stats-card-cc">
              <div class="refresh-header">
                <img src="/EU2K-Hub/assets/refresh.svg" class="refresh-icon" alt="Frissítés">
                <span class="refresh-text">Frissítés</span>
              </div>
            </div>
          </div>

          <!-- Értesítések Kártya -->
          <div class="notifications-card-container">
            <!-- Csengő ikon a bal felső sarokban -->
            <div class="notification-bell">
              <img src="/EU2K-Hub/assets/notifs.svg" class="bell-icon" alt="Értesítések">
            </div>

            <!-- Teljes szélességű header -->
            <div class="notifications-header">
              <span class="notifications-title">Értesítések</span>
            </div>

            <div class="notifications-content">
              <!-- Bal oldal - Értesítés lista -->
              <div class="notifications-list">

                <div class="notification-item active" data-notification="0">
                  <img src="/EU2K-Hub/assets/man_dark.svg" class="notification-avatar" alt="Férfi">
                  <div class="notification-content">
                    <div class="notification-title">Férfi Példanév</div>
                    <div class="notification-desc">02.12-én nem kell első órába jönnöd.</div>
                  </div>
                </div>

                <div class="notification-item" data-notification="1">
                  <img src="/EU2K-Hub/assets/woman_light.svg" class="notification-avatar" alt="Női">
                  <div class="notification-content">
                    <div class="notification-title">Női Példanév</div>
                    <div class="notification-desc">02.12-én nem kell első órába jönnöd.</div>
                  </div>
                </div>

                <div class="notification-item" data-notification="2">
                  <img src="/EU2K-Hub/assets/woman_light.svg" class="notification-avatar" alt="Női">
                  <div class="notification-content">
                    <div class="notification-title">Női Példanév</div>
                    <div class="notification-desc">02.12-én nem kell első órába jönnöd.</div>
                  </div>
                </div>
              </div>

              <!-- Jobb oldal - Részletes nézet -->
              <div class="notification-detail">
                <div class="notification-detail-header">
                  <img src="/EU2K-Hub/assets/man_light.svg" class="detail-avatar" alt="Férfi">
                  <div class="detail-info">
                    <div class="detail-title">Férfi Példanév</div>
                    <div class="detail-desc">02.12-én Tanítás nélküli Munkanap lesz, emiatt nem kell jönnöd az iskolába.
                      Nem kell visszapótolni a napot.</div>
                  </div>
                </div>

                <div class="notification-actions">
                  <button class="notification-delete-btn">
                    <img src="/EU2K-Hub/assets/trash_darkgreen.svg" class="delete-icon" alt="Törlés">
                    <span>Törlés</span>
                  </button>
                  <button class="notification-dismiss-btn">
                    <img src="/EU2K-Hub/assets/not_interested.svg" class="dismiss-icon" alt="Nem érdekel">
                    <span>Nem érdekel</span>
                  </button>
                </div>
              </div>
            </div>
          </div>



          <!-- Javaslatok Kártya -->
          <div class="suggestions-card-container">
            <!-- Csengő ikon és header -->
            <div class="suggestions-lightbulb">
              <img src="/EU2K-Hub/assets/suggestions_icon.svg" class="suggestions-lightbulb-icon" alt="Javaslatok">
            </div>

            <div class="suggestions-header">
              <span class="suggestions-title">Javaslatok</span>
              <span class="suggestions-subtitle">Promptok</span>
            </div>

            <!-- Prompt kártyák -->
            <div class="prompt-cards-grid">
              <div class="prompt-card">
                <div class="prompt-image-container">
                  <div class="prompt-image-bg"></div>
                  <img src="/EU2K-Hub/assets/placeholder_img.svg" class="prompt-image" alt="Placeholder">
                </div>
                <div class="prompt-content">
                  <div class="prompt-title">Fotorealisztikus...</div>
                  <div class="prompt-desc">Készíts egy fotorealisztikus képet, arról hogy kint...</div>
                </div>
              </div>

              <div class="prompt-card">
                <div class="prompt-image-container">
                  <div class="prompt-image-bg"></div>
                  <img src="/EU2K-Hub/assets/placeholder_img.svg" class="prompt-image" alt="Placeholder">
                </div>
                <div class="prompt-content">
                  <div class="prompt-title">Puffy ikonok ké...</div>
                  <div class="prompt-desc">Create a high quality, puffy icon of [ide a név]. Make...</div>
                </div>
              </div>

              <div class="prompt-card">
                <div class="prompt-image-container">
                  <div class="prompt-image-bg"></div>
                  <img src="/EU2K-Hub/assets/placeholder_img.svg" class="prompt-image" alt="Placeholder">
                </div>
                <div class="prompt-content">
                  <div class="prompt-title">Kémiai ábrák</div>
                  <div class="prompt-desc">Készíts egy fotorealisztikus képet, arról hogy kint...</div>
                </div>
              </div>

              <div class="prompt-card">
                <div class="prompt-image-container">
                  <div class="prompt-image-bg"></div>
                  <img src="/EU2K-Hub/assets/placeholder_img.svg" class="prompt-image" alt="Placeholder">
                </div>
                <div class="prompt-content">
                  <div class="prompt-title">Fotorealisztikus...</div>
                  <div class="prompt-desc">Készíts egy fotorealisztikus képet, arról hogy kint...</div>
                </div>
              </div>
            </div>

            <!-- Javaslat Beküldése szöveg -->
            <div class="suggestion-submit-text">Javaslat Beküldése</div>

            <!-- Input és kategória rész -->
            <div class="suggestion-input-section">
              <!-- Bal oldal - Textbox -->
              <div class="suggestion-input-container">
                <textarea class="suggestion-input" placeholder="Ide írj..."></textarea>
                <div class="suggestion-input-limit">Maximum 1000 karakter</div>
              </div>

              <!-- Jobb oldal - Kategória -->
              <div class="suggestion-category-section">
                <div class="category-container">
                  <div class="category-header">
                    <span class="category-title">Kategória</span>
                  </div>

                  <div class="category-buttons">
                    <button class="category-btn active" data-category="prompt">
                      <img src="/EU2K-Hub/assets/chatgpt_prompt_icon.svg" class="category-icon" alt="Prompt">
                      <span>Prompt</span>
                      <div class="category-check">
                        <img src="/EU2K-Hub/assets/check.svg" class="check-icon" alt="Check">
                      </div>
                    </button>

                    <button class="category-btn" data-category="hive">
                      <img src="/EU2K-Hub/assets/hive.svg" class="category-icon" alt="Hive">
                      <span>Hive</span>
                      <div class="category-check">
                        <img src="/EU2K-Hub/assets/check.svg" class="check-icon" alt="Check">
                      </div>
                      <div class="hive-tooltip">Az OkosDoboz le lesz cserélve a
                        Hive funkcióra. Mostantól itt tudsz javaslatokat beadni, amit eddig az OkosDobozba dobtál.</div>
                    </button>
                  </div>
                </div>

                <!-- Info chip -->
                <div class="category-info">
                  <img src="/EU2K-Hub/assets/info.svg" class="info-icon" alt="Info">
                  <span>Amikor elküldöd a Javaslatot, a profilképed meg fog
                    jelenni nyilvánosan mindenkinek, akinek joga van megtekinteni a Javaslatot.</span>
                </div>
              </div>
            </div>

            <!-- Cím input -->
            <div class="suggestion-title-container">
              <input type="text" class="suggestion-title-input" placeholder="Cím...">
            </div>

            <!-- Küldés gomb -->
            <button class="suggestion-send-btn">
              <img src="/EU2K-Hub/assets/send.svg" class="send-icon" alt="Küldés">
            </button>
          </div>
          <!-- Naptár Kártya -->
          <div class="calendar-card-container">
            <!-- Naptár ikon a bal felső sarokban -->
            <div class="calendar-bell">
              <img src="/EU2K-Hub/assets/calendar_icon.svg" class="calendar-bell-icon" alt="Naptár">
            </div>

            <!-- Header -->
            <div class="calendar-header">
              <span class="calendar-title">Naptár</span>
            </div>

            <!-- Belső kártya -->
            <div class="calendar-inner-card">
              <!-- Mai dátum -->
              <div class="calendar-date-header">
                <div class="calendar-date-content">
                  <span class="calendar-current-date" id="currentDate">MÁRCIUS 16.</span>
                  <div class="calendar-input-container" style="display: none;" id="inputContainer">
                    <input type="text" class="calendar-date-input" id="dateInput">
                    <span class="calendar-autocomplete-ghost" id="autocompleteGhost"></span>
                  </div>
                </div>
                <div class="calendar-edit-wrapper">
                  <img src="/EU2K-Hub/assets/edit.svg" class="calendar-edit-icon" id="editButton" alt="Szerkesztés">
                </div>
              </div>

              <!-- Elválasztó vonal -->
              <div class="calendar-divider"></div>

              <!-- Hónap navigáció -->
              <div class="calendar-month-nav">
                <span class="calendar-month-year" id="monthYear">Március 2025</span>
                <div class="calendar-nav-arrows">
                  <img src="/EU2K-Hub/assets/arrow_left.svg" class="calendar-arrow" id="prevMonth" alt="Előző hónap">
                  <img src="/EU2K-Hub/assets/arrow_right.svg" class="calendar-arrow" id="nextMonth" alt="Következő hónap">
                </div>
              </div>

              <!-- Nap csík -->
              <div class="calendar-day-strip">
                <div class="calendar-day-info">
                  <img src="/EU2K-Hub/assets/calendar_icon.svg" class="calendar-day-icon" alt="Naptár">
                  <span class="calendar-day-name" id="dayName">Hétfő</span>
                </div>
                <img src="/EU2K-Hub/assets/arrow_down.svg" class="calendar-dropdown" alt="Lenyíló">
              </div>

              <!-- Órarend és Dolgozatok konténer -->
              <div class="calendar-content-grid">
                <!-- Órarend kártya -->
                <div class="schedule-card">
                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/osztalyfonoki.svg" class="schedule-icon" alt="Osztályfőnöki">
                    <div class="schedule-info">
                      <div class="schedule-subject">Osztályfőnöki</div>
                      <div class="schedule-description">Zalasch Bernadett - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <div class="schedule-time-container">
                        <span class="schedule-time-text">08:25</span>
                        <span class="schedule-time-text">08:55</span>
                      </div>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/biologia.svg" class="schedule-icon" alt="Biológia">
                    <div class="schedule-info">
                      <div class="schedule-subject">Biológia</div>
                      <div class="schedule-description">Kiss Tamás - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <div class="schedule-time-container">
                        <span class="schedule-time-text">09:10</span>
                        <span class="schedule-time-text">09:55</span>
                      </div>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/matematika.svg" class="schedule-icon" alt="Matematika">
                    <div class="schedule-info">
                      <div class="schedule-subject">Matematika</div>
                      <div class="schedule-description">Katona Dániel - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <div class="schedule-time-container">
                        <span class="schedule-time-text">09:10</span>
                        <span class="schedule-time-text">09:55</span>
                      </div>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/foldrajz.svg" class="schedule-icon" alt="Földrajz">
                    <div class="schedule-info">
                      <div class="schedule-subject">Földrajz</div>
                      <div class="schedule-description">Vincze Attila - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <div class="schedule-time-container">
                        <span class="schedule-time-text">09:10</span>
                        <span class="schedule-time-text">09:55</span>
                      </div>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/vizualis_kultura.svg" class="schedule-icon" alt="Vizuális Kultúra">
                    <div class="schedule-info">
                      <div class="schedule-subject">Vizuális Kultúra</div>
                      <div class="schedule-description">Lendér Andrea - Könyvtár</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <div class="schedule-time-container">
                        <span class="schedule-time-text">09:10</span>
                        <span class="schedule-time-text">09:55</span>
                      </div>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/angol_nemet_francia_spanyol.svg" class="schedule-icon" alt="Angol">
                    <div class="schedule-info">
                      <div class="schedule-subject">Angol</div>
                      <div class="schedule-description">Sikolya Erzsébet - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <div class="schedule-time-container">
                        <span class="schedule-time-text">09:10</span>
                        <span class="schedule-time-text">09:55</span>
                      </div>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/matematika_kompetencia.svg" class="schedule-icon"
                      alt="Mat. Kompetencia">
                    <div class="schedule-info">
                      <div class="schedule-subject">Mat. Kompetencia</div>
                      <div class="schedule-description">Katona Dániel - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <div class="schedule-time-container">
                        <span class="schedule-time-text">09:10</span>
                        <span class="schedule-time-text">09:55</span>
                      </div>
                    </div>
                  </div>
                </div>

                <!-- Dolgozatok kártya -->
                <div class="tests-card">
                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/digitalis_kultura.svg" class="schedule-icon" alt="Digitális Kultúra">
                    <div class="schedule-info">
                      <div class="schedule-subject">Digitális Kultúra</div>
                      <div class="schedule-description">Furják László - B/22</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <span class="schedule-time-text">02:02</span>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/biologia.svg" class="schedule-icon" alt="Biológia">
                    <div class="schedule-info">
                      <div class="schedule-subject">Biológia</div>
                      <div class="schedule-description">Kiss Tamás - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <span class="schedule-time-text">02:05</span>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/matematika.svg" class="schedule-icon" alt="Matematika">
                    <div class="schedule-info">
                      <div class="schedule-subject">Matematika</div>
                      <div class="schedule-description">Katona Dániel - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <span class="schedule-time-text">02:11</span>
                    </div>
                  </div>

                  <div class="schedule-item">
                    <img src="/EU2K-Hub/assets/class_icons/foldrajz.svg" class="schedule-icon" alt="Földrajz">
                    <div class="schedule-info">
                      <div class="schedule-subject">Földrajz</div>
                      <div class="schedule-description">Vincze Attila - A/30</div>
                    </div>
                    <div class="schedule-time">
                      <img src="/EU2K-Hub/assets/clock.svg" class="schedule-clock" alt="Óra">
                      <span class="schedule-time-text">02:12</span>
                    </div>
                  </div>

                  <!-- Divider és shrug -->
                  <div class="tests-divider"></div>
                  <div class="tests-empty">
                    <img src="/EU2K-Hub/assets/shrug.svg" class="tests-shrug" alt="Shrug">
                    <span class="tests-empty-text">Itt egyelőre ennyi!</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
       <div id="site-footer" class="footer" aria-label="Site footer">
        <div class="footer-container">
          <div class="footer-left">
            <img src="/EU2K-Hub/eu2k_hub_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Hub Logó">
          </div>
          <div class="footer-center">
            <a class="footer-privacy" data-translate="pages.index.privacy_policy" href="/EU2K-Hub/privacy_policy.html">Adatkezelési Tájékoztató</a>
            <a class="footer-privacy" data-translate="pages.index.terms_of_service" href="/EU2K-Hub/terms_of_service.html">Használati Feltételek</a>
          </div>
          <div class="footer-right">
            <img src="/EU2K-Hub/eu2k_devs_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Devs Logó">
            <img src="/EU2K-Hub/eu2k_dok_logo_hor_dark_smoller_by_width.png" class="footer-logo-wide" alt="EU2K DÖK Logó">
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Visszajelzés gomb - fix pozíció -->
  <div class="feedback-floating-button" id="feedbackButton">
    <img src="/EU2K-Hub/assets/courses_icons/feedback_icon.svg" class="feedback-floating-icon" alt="Visszajelzés">
    <span class="feedback-floating-text">Visszajelzés</span>
  </div>

  <!-- Feedback Popup -->
  <div class="feedback-popup-overlay" id="feedbackPopup" style="display: none;">
    <div class="feedback-popup">
      <!-- Header -->
      <div class="feedback-popup-header">
        <img src="/EU2K-Hub/assets/courses_icons/feedback_icon.svg" class="feedback-popup-icon" alt="Visszajelzés">
        <span class="feedback-popup-title">Visszajelzés</span>
        <button class="feedback-close-btn" onclick="closeFeedbackPopup()">
          <img src="/EU2K-Hub/assets/close.svg" class="feedback-close-icon" alt="Bezárás">
        </button>
      </div>

      <!-- Input textbox -->
      <div class="feedback-input-container">
        <textarea class="feedback-input" placeholder="Ide írj..."></textarea>
        <div class="feedback-input-limit">Maximum 1000 karakter</div>
      </div>

      <!-- Kategória kártyák -->
      <div class="feedback-category-section">
        <div class="feedback-category-container">
          <div class="feedback-category-header">
            <span class="feedback-category-title">Kategória</span>
          </div>

          <div class="feedback-category-buttons">
            <button class="feedback-category-btn active" data-category="function">
              <span>Funkció amit javítani kéne</span>
              <div class="feedback-category-check">
                <img src="/EU2K-Hub/assets/check.svg" class="feedback-check-icon" alt="Check">
              </div>
            </button>

            <button class="feedback-category-btn" data-category="feature">
              <span>Funkció amit látni szeretnék</span>
              <div class="feedback-category-check">
                <img src="/EU2K-Hub/assets/check.svg" class="feedback-check-icon" alt="Check">
              </div>
            </button>
          </div>
        </div>

        <!-- Info chip -->
        <div class="feedback-category-info">
          <img src="/EU2K-Hub/assets/info.svg" class="feedback-info-icon" alt="Info">
          <span>Nagyon köszönjük, hogy segítesz nekünk fejleszteni a Hubot! Ezek a
            visszajelzések névtelenek, nem fogjuk tudni ki küldte be.</span>
        </div>
      </div>

      <!-- Cím input és küldés gomb egy sorban -->
      <div class="feedback-bottom-section">
        <div class="feedback-title-container">
          <input type="text" class="feedback-title-input" placeholder="Cím...">
        </div>
        <button class="feedback-send-btn" onclick="submitFeedback()">
          <img src="/EU2K-Hub/assets/send.svg" class="feedback-send-icon" alt="Küldés">
        </button>
      </div>
    </div>
  </div>

  <script>
    // Feedback gomb és popup kezelése
    const feedbackButton = document.getElementById('feedbackButton');
    const feedbackPopup = document.getElementById('feedbackPopup');

    if (feedbackButton && feedbackPopup) {
      // Feedback popup megnyitása
      feedbackButton.addEventListener('click', () => {
        feedbackPopup.style.display = 'flex';
        feedbackPopup.classList.remove('closing');
      });

      // Popup bezárása overlay-re kattintáskor
      feedbackPopup.addEventListener('click', (e) => {
        if (e.target === feedbackPopup) {
          closeFeedbackPopup();
        }
      });
    }

    // Bezáró függvény animációval
    function closeFeedbackPopup() {
      const feedbackPopup = document.getElementById('feedbackPopup');
      if (feedbackPopup) {
        feedbackPopup.classList.add('closing');
        setTimeout(() => {
          feedbackPopup.style.display = 'none';
          feedbackPopup.classList.remove('closing');
        }, 300); // 300ms animáció után bezárás
      }
    }

    // Kategória gombok kezelése
    const feedbackCategoryBtns = document.querySelectorAll('.feedback-category-btn');
    feedbackCategoryBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // Eltávolítjuk az active osztályt minden gombról
        feedbackCategoryBtns.forEach(b => b.classList.remove('active'));
        // Hozzáadjuk az active osztályt az aktuális gombhoz
        btn.classList.add('active');
      });
    });

    // Feedback beküldés függvény
    async function submitFeedback() {
      try {
        // Form adatok összegyűjtése
        const titleInput = document.querySelector('.feedback-title-input');
        const descriptionInput = document.querySelector('.feedback-input');
        const activeCategory = document.querySelector('.feedback-category-btn.active');

        // Validáció
        if (!titleInput.value.trim()) {
          showToast('Kérlek add meg a címet!', 'error');
          return;
        }
        if (!descriptionInput.value.trim()) {
          showToast('Kérlek írj le valamit!', 'error');
          return;
        }
        if (!activeCategory) {
          showToast('Kérlek válassz kategóriát!', 'error');
          return;
        }

        // Kategória meghatározása
        const categoryData = activeCategory.getAttribute('data-category');
        const collectionName = categoryData === 'function' ? 'fix_things' : 'new_recommendations';

        // Firestore v9 függvények importálása
        const { collection, doc, getDocs, setDoc, serverTimestamp } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");

        // Következő dokumentum ID meghatározása
        const collectionRef = collection(db, 'homePageData', 'feedback', collectionName);
        const snapshot = await getDocs(collectionRef);

        let nextId = 1;
        if (!snapshot.empty) {
          const docIds = snapshot.docs.map(docSnapshot => parseInt(docSnapshot.id)).filter(id => !isNaN(id));
          if (docIds.length > 0) {
            nextId = Math.max(...docIds) + 1;
          }
        }

        // Új feedback dokumentum létrehozása
        const feedbackData = {
          title: titleInput.value.trim(),
          description: descriptionInput.value.trim(),
          class: '8.E', // Hardcoded amíg nincs Firebase Auth - utána jobDescription lesz
          timestamp: serverTimestamp()
        };

        const newDocRef = doc(collectionRef, nextId.toString());
        await setDoc(newDocRef, feedbackData);

        // Sikeres beküldés - toast megjelenítése
        showToast('✓ Sikeresen beküldted a visszajelzést!', 'success');

        // Form resetelése
        titleInput.value = '';
        descriptionInput.value = '';

        // Popup bezárása
        closeFeedbackPopup();

      } catch (error) {
        console.error('Hiba a feedback beküldésekor:', error);
        showToast('Hiba történt a beküldés során. Próbáld újra!', 'error');
      }
    }

    // Általános toast megjelenítő függvény
    function showToast(message, type = 'success') {
      // Meglévő toast eltávolítása
      const existingToast = document.querySelector('.feedback-toast');
      if (existingToast) {
        existingToast.remove();
      }

      // Új toast létrehozása
      const toast = document.createElement('div');
      toast.className = `feedback-toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);

      // Megjelenítés
      setTimeout(() => toast.classList.add('show'), 10);

      // 3 másodperc után eltűnik
      setTimeout(() => {
        toast.classList.remove('show');
        toast.classList.add('hide');

        setTimeout(() => {
          toast.remove();
        }, 300);
      }, 3000);
    }
  </script>
  <script src="/EU2K-Hub/assets/js/translations.js"></script>
  <div id="site-footer" class="footer" aria-label="Site footer">
    <div class="footer-container">
      <div class="footer-left">
        <img src="/EU2K-Hub/eu2k_hub_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Hub Logó">
      </div>
      <div class="footer-center">
        <a class="footer-privacy" data-translate="pages.index.privacy_policy" href="/EU2K-Hub/privacy_policy.html">Adatkezelési Tájékoztató</a>
            <a class="footer-privacy" data-translate="pages.index.terms_of_service" href="/EU2K-Hub/terms_of_service.html">Használati Feltételek</a>
      </div>
      <div class="footer-right">
        <img src="/EU2K-Hub/eu2k_devs_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Devs Logó">
        <img src="/EU2K-Hub/eu2k_dok_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K DÖK Logó">
      </div>
    </div>
  </div>
</body>

</html>

<!DOCTYPE html>
<html lang="hu">

<head>
  <meta charset="UTF-8">
  <meta name="description" content="√ñr√ºl√ºnk hogy ennyire √©rdekl≈ëdsz a YouHub ir√°nt, de egyel≈ëre m√©g fejleszt√©s alatt van, √©s nem alkalmas a mostani √°llapot√°ban a haszn√°latra. N√©zz vissza k√©s≈ëbb üëã">
  <title data-translate="pages.youhub.title">YouHub</title>
  <link rel="stylesheet" href="youhub.css">
  <link rel="icon" href="/EU2K-Hub/favicon.ico">
  <script type="importmap">
    {
      "imports": {
        "@material/web/": "https://esm.run/@material/web/"
      }
    }
  </script>
  <script type="module">
    import '@material/web/all.js';
    import { styles as typescaleStyles } from '@material/web/typography/md-typescale-styles.js';

    document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
  </script>
  <script src="/EU2K-Hub/assets/js/permissions.js"></script>
  <script src="/EU2K-Hub/assets/js/translations.js"></script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBRRVx6BtQtCDKjFYA8yh9qYrcUONmkkwI",
      authDomain: "eu2k-hub.firebaseapp.com",
      projectId: "eu2k-hub",
      storageBucket: "eu2k-hub.firebasestorage.app",
      messagingSenderId: "560244867055",
      appId: "1:560244867055:web:3cd51b85baead94989001a",
      measurementId: "G-2JDPR089WD"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app);

    // Make db globally available
    window.db = db;
  </script>
</head>

<body>
  <div class="app-bg">
    <aside class="sidebar">
      <nav class="nav-menu">
        <a class="nav-item" href="index.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/home_icon.svg" class="nav-icon" alt="Otthon">
          </div>
          <span data-translate="navigation.home">Otthon</span>
        </a>
        <a class="nav-item" href="qr-code.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/qr_code_icon.svg" class="nav-icon" alt="QR-K√≥d">
          </div>
          <span data-translate="navigation.qr">QR-K√≥d</span>
        </a>
        <a class="nav-item active" href="youhub.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/youhub_icon.svg" class="nav-icon" alt="YouHub">
          </div>
          <span data-translate="navigation.youhub">YouHub</span>
        </a>
        <a class="nav-item" href="courses.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/courses_icon.svg" class="nav-icon" alt="Kurzusok">
          </div>
          <span data-translate="navigation.courses">Kurzusok</span>
        </a>
      </nav>
    </aside>
    <main class="main-area">
      <div class="main-content">
        <header class="header">
          <div class="header-icons">
            <a href="/EU2K-Hub/system/account.html" class="header-icon-link">
              <img src="/EU2K-Hub/assets/account_icon.svg" class="header-icon" alt="Account">
            </a>
            <a href="/EU2K-Hub/settings/settings.html" class="header-icon-link">
              <img src="/EU2K-Hub/assets/settings_icon.svg" class="header-icon" alt="Settings">
            </a>
          </div>
        </header>
        <div class="courses-container">
          <!-- Block ikon -->
          <img src="/EU2K-Hub/assets/settings_icons/community_page/block.svg" class="courses-block-icon" alt="Block">
          
          <!-- Kurzusok c√≠m -->
          <h1 class="courses-title" data-translate="pages.youhub.title">YouHub</h1>
          
          <!-- Le√≠r√≥ sz√∂veg -->
          <p class="courses-description">
            <span data-translate="pages.youhub.description">√ñr√ºl√ºnk hogy ennyire √©rdekl≈ëdsz a YouHub ir√°nt, de egyel≈ëre m√©g fejleszt√©s alatt van, √©s nem alkalmas a mostani √°llapot√°ban a haszn√°latra.</span>
            <br><br>
            <span data-translate="pages.courses.description2">Viszont, addig tudsz visszajelz√©st adni, √©s elmondani</span> <strong data-translate="pages.courses.description3">szerinted</strong> <span data-translate="pages.courses.description4">mi lenne ide a legjobb ;)</span>
          </p>
          
          <!-- Visszajelz√©s gomb -->
          <button class="feedback-button">
            <img src="/EU2K-Hub/assets/courses_icons/feedback_icon.svg" class="feedback-icon" alt="Visszajelz√©s">
            <span class="feedback-text" data-translate="pages.courses.feedback_button">Visszajelz√©s</span>
          </button>
        </div>
      </div>
    </main>
  </div>

  <!-- Feedback Popup -->
  <div class="feedback-popup-overlay" id="feedbackPopup" style="display: none;">
    <div class="feedback-popup">
      <!-- Header -->
      <div class="feedback-popup-header">
        <img src="/EU2K-Hub/assets/courses_icons/feedback_icon.svg" class="feedback-popup-icon" alt="Visszajelz√©s">
        <span class="feedback-popup-title">Visszajelz√©s</span>
        <button class="feedback-close-btn" onclick="closeFeedbackPopup()">
          <img src="/EU2K-Hub/assets/close.svg" class="feedback-close-icon" alt="Bez√°r√°s">
        </button>
      </div>

      <!-- Input textbox -->
      <div class="feedback-input-container">
        <textarea class="feedback-input" placeholder="Ide √≠rj..."></textarea>
        <div class="feedback-input-limit">Maximum 1000 karakter</div>
      </div>

      <!-- Kateg√≥ria k√°rty√°k -->
      <div class="feedback-category-section">
        <div class="feedback-category-container">
          <div class="feedback-category-header">
            <span class="feedback-category-title">Kateg√≥ria</span>
          </div>

          <div class="feedback-category-buttons">
            <button class="feedback-category-btn active" data-category="function">
              <span>Funkci√≥ amit jav√≠tani k√©ne</span>
              <div class="feedback-category-check">
                <img src="/EU2K-Hub/assets/check.svg" class="feedback-check-icon" alt="Check">
              </div>
            </button>

            <button class="feedback-category-btn" data-category="feature">
              <span>Funkci√≥ amit l√°tni szeretn√©k</span>
              <div class="feedback-category-check">
                <img src="/EU2K-Hub/assets/check.svg" class="feedback-check-icon" alt="Check">
              </div>
            </button>
          </div>
        </div>

        <!-- Info chip -->
        <div class="feedback-category-info">
          <img src="/EU2K-Hub/assets/info.svg" class="feedback-info-icon" alt="Info">
          <span>Nagyon k√∂sz√∂nj√ºk, hogy seg√≠tesz nek√ºnk fejleszteni a Hubot! Ezek a
            visszajelz√©sek n√©vtelenek, nem fogjuk tudni ki k√ºldte be.</span>
        </div>
      </div>

      <!-- C√≠m input √©s k√ºld√©s gomb egy sorban -->
      <div class="feedback-bottom-section">
        <div class="feedback-title-container">
          <input type="text" class="feedback-title-input" placeholder="C√≠m...">
        </div>
        <button class="feedback-send-btn" onclick="submitFeedback()">
          <img src="/EU2K-Hub/assets/send.svg" class="feedback-send-icon" alt="K√ºld√©s">
        </button>
      </div>
    </div>
  </div>

  <script>
    // Feedback gomb √©s popup kezel√©se
    const feedbackButton = document.querySelector('.feedback-button');
    const feedbackPopup = document.getElementById('feedbackPopup');

    if (feedbackButton && feedbackPopup) {
      // Feedback popup megnyit√°sa
      feedbackButton.addEventListener('click', () => {
        feedbackPopup.style.display = 'flex';
        feedbackPopup.classList.remove('closing');
      });

      // Popup bez√°r√°sa overlay-re kattint√°skor
      feedbackPopup.addEventListener('click', (e) => {
        if (e.target === feedbackPopup) {
          closeFeedbackPopup();
        }
      });
    }

    // Bez√°r√≥ f√ºggv√©ny anim√°ci√≥val
    function closeFeedbackPopup() {
      const feedbackPopup = document.getElementById('feedbackPopup');
      if (feedbackPopup) {
        feedbackPopup.classList.add('closing');
        setTimeout(() => {
          feedbackPopup.style.display = 'none';
          feedbackPopup.classList.remove('closing');
        }, 300); // 300ms anim√°ci√≥ ut√°n bez√°r√°s
      }
    }

    // Kateg√≥ria gombok kezel√©se
    const feedbackCategoryBtns = document.querySelectorAll('.feedback-category-btn');
    feedbackCategoryBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // Elt√°vol√≠tjuk az active oszt√°lyt minden gombr√≥l
        feedbackCategoryBtns.forEach(b => b.classList.remove('active'));
        // Hozz√°adjuk az active oszt√°lyt az aktu√°lis gombhoz
        btn.classList.add('active');
      });
    });

    // Feedback bek√ºld√©s f√ºggv√©ny
    async function submitFeedback() {
      try {
        // Form adatok √∂sszegy≈±jt√©se
        const titleInput = document.querySelector('.feedback-title-input');
        const descriptionInput = document.querySelector('.feedback-input');
        const activeCategory = document.querySelector('.feedback-category-btn.active');

        // Valid√°ci√≥
        if (!titleInput.value.trim()) {
          showToast('K√©rlek add meg a c√≠met!', 'error');
          return;
        }
        if (!descriptionInput.value.trim()) {
          showToast('K√©rlek √≠rj le valamit!', 'error');
          return;
        }
        if (!activeCategory) {
          showToast('K√©rlek v√°lassz kateg√≥ri√°t!', 'error');
          return;
        }

        // Kateg√≥ria meghat√°roz√°sa
        const categoryData = activeCategory.getAttribute('data-category');
        const collectionName = categoryData === 'function' ? 'fix_things' : 'new_recommendations';

        // Firestore v9 f√ºggv√©nyek import√°l√°sa
        const { collection, doc, getDocs, setDoc, serverTimestamp } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");

        // K√∂vetkez≈ë dokumentum ID meghat√°roz√°sa
        const collectionRef = collection(db, 'homePageData', 'feedback', collectionName);
        const snapshot = await getDocs(collectionRef);

        let nextId = 1;
        if (!snapshot.empty) {
          const docIds = snapshot.docs.map(docSnapshot => parseInt(docSnapshot.id)).filter(id => !isNaN(id));
          if (docIds.length > 0) {
            nextId = Math.max(...docIds) + 1;
          }
        }

        // √öj feedback dokumentum l√©trehoz√°sa
        const feedbackData = {
          title: titleInput.value.trim(),
          description: descriptionInput.value.trim(),
          class: '8.E', // Hardcoded am√≠g nincs Firebase Auth - ut√°na jobDescription lesz
          timestamp: serverTimestamp()
        };

        const newDocRef = doc(collectionRef, nextId.toString());
        await setDoc(newDocRef, feedbackData);

        // Sikeres bek√ºld√©s - toast megjelen√≠t√©se
        showToast('‚úì Sikeresen bek√ºldted a visszajelz√©st!', 'success');

        // Form resetel√©se
        titleInput.value = '';
        descriptionInput.value = '';

        // Popup bez√°r√°sa
        closeFeedbackPopup();

      } catch (error) {
        console.error('Hiba a feedback bek√ºld√©sekor:', error);
        showToast('Hiba t√∂rt√©nt a bek√ºld√©s sor√°n. Pr√≥b√°ld √∫jra!', 'error');
      }
    }

    // √Åltal√°nos toast megjelen√≠t≈ë f√ºggv√©ny
    function showToast(message, type = 'success') {
      // Megl√©v≈ë toast elt√°vol√≠t√°sa
      const existingToast = document.querySelector('.feedback-toast');
      if (existingToast) {
        existingToast.remove();
      }

      // √öj toast l√©trehoz√°sa
      const toast = document.createElement('div');
      toast.className = `feedback-toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);

      // Megjelen√≠t√©s
      setTimeout(() => toast.classList.add('show'), 10);

      // 3 m√°sodperc ut√°n elt≈±nik
      setTimeout(() => {
        toast.classList.remove('show');
        toast.classList.add('hide');

        setTimeout(() => {
          toast.remove();
        }, 300);
      }, 3000);
    }
  </script>
</body>

</html>
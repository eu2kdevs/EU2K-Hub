<!DOCTYPE html>
<html lang="hu">

<head>
  <meta charset="UTF-8">
  <meta name="description"
    content="Láss többet a Hub-ról, kapcsold ki és be az értesítéseket, kezeld a statisztikáidat, lásd mely Kurzusok tagja vagy, és még sok mást.">
  <title data-translate="pages.settings.title">Beállítások</title>
  <script>
    (function(){
      if (!document.getElementById('eu2k-page-overlay')) {
        var o = document.createElement('div');
        o.id = 'eu2k-page-overlay';
        o.style.cssText = 'position:fixed;inset:0;z-index:9999;background:#0B0F0B;border-radius:32px;opacity:1;transition:opacity 300ms ease-in-out;';
        var inner = document.createElement('div');
        inner.style.cssText = 'position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#0B0F0B;border-radius:32px;';
        var m = document.createElement('div');
        m.id = 'eu2k-overlay-mount';
        m.style.cssText = 'position:relative;width:100%;height:100%';
        inner.appendChild(m);
        o.appendChild(inner);
        document.documentElement.appendChild(o);
      }
    })();
  </script>
  <script src="/EU2K-Hub/assets/js/page-overlay-loader.js"></script>
  <link rel="stylesheet" href="settings.css">
  <link rel="icon" href="/EU2K-Hub/favicon.ico">
  <script type="importmap">
    {
      "imports": {
        "@material/web/": "https://esm.run/@material/web/"
      }
    }
  </script>
  <script type="module">
    import '@material/web/all.js';
    import { styles as typescaleStyles } from '@material/web/typography/md-typescale-styles.js';

    document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
  </script>
  <script type="module">
    import '@material/web/all.js';
    import { styles as typescaleStyles } from '@material/web/typography/md-typescale-styles.js';

    document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
  </script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBRRVx6BtQtCDKjFYA8yh9qYrcUONmkkwI",
      authDomain: "eu2k-hub.firebaseapp.com",
      projectId: "eu2k-hub",
      storageBucket: "eu2k-hub.firebasestorage.app",
      messagingSenderId: "560244867055",
      appId: "1:560244867055:web:3cd51b85baead94989001a",
      measurementId: "G-2JDPR089WD"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);

    // Import Firestore debug module
    import('../assets/js/firestore-debug.js').catch(err => {
      console.warn('Firestore debug module not loaded:', err);
    });
  </script>

  <script>
    // SPA routing és tartalomváltás - Hash alapú navigáció
    function initializeSettings() {
      const settingsCards = document.querySelectorAll('.settings-card');
      const settingsPages = document.querySelectorAll('.settings-page');

      function showPage(pageId) {
        console.log('Showing page:', pageId); // Debug

        // Minden oldal ERŐS elrejtése
        settingsPages.forEach(page => {
          page.classList.remove('active');
          page.style.display = 'none';
          page.style.visibility = 'hidden';
          page.style.opacity = '0';
        });

        // Minden kártya inaktívvá tétele
        settingsCards.forEach(card => {
          card.classList.remove('active');
        });

        // Megfelelő oldal megjelenítése
        const targetPage = document.getElementById(pageId + '-page');
        const targetCard = document.querySelector(`[data-page="${pageId}"]`);

        console.log('Target page:', targetPage); // Debug
        console.log('Target card:', targetCard); // Debug

        if (targetPage) {
          targetPage.classList.add('active');
          targetPage.style.display = 'block';
          targetPage.style.visibility = 'visible';
          targetPage.style.opacity = '1';
        }

        if (targetCard) {
          targetCard.classList.add('active');
        }
      }

      function navigate(event, pageId) {
        event.preventDefault();
        location.hash = pageId;
      }

      // Kártyák eseménykezelői
      settingsCards.forEach(card => {
        card.addEventListener('click', e => {
          const pageId = card.getAttribute('data-page');
          navigate(e, pageId);
        });
      });

      // Switch eseménykezelő - megakadályozza a kártya aktiválását
      const notificationSwitch = document.querySelector('.settings-card[data-page="notifications"] md-switch');
      if (notificationSwitch) {
        notificationSwitch.addEventListener('click', e => {
          e.stopPropagation(); // Megakadályozza a kártya kattintás eseményét
        });
      }

      // Kategória switch-ek eseménykezelői
      const categorySwitches = document.querySelectorAll('.category-item md-switch');
      categorySwitches.forEach(switchElement => {
        switchElement.addEventListener('click', e => {
          e.stopPropagation(); // Megakadályozza a kártya kattintás eseményét
        });
      });

      // Üdvözlő képernyő switch kezelése
      const welcomeScreenSwitch = document.getElementById('welcome-screen-switch');
      if (welcomeScreenSwitch && window.welcomeScreenManager) {
        // Beállítjuk a switch állapotát a mentett beállítás alapján
        welcomeScreenSwitch.selected = window.welcomeScreenManager.isWelcomeScreenEnabled();

        welcomeScreenSwitch.addEventListener('click', e => {
          e.stopPropagation(); // Megakadályozza a kártya kattintás eseményét
        });

        welcomeScreenSwitch.addEventListener('change', e => {
          const isEnabled = e.target.selected;
          window.welcomeScreenManager.setWelcomeScreenEnabled(isEnabled);
          console.log('Welcome screen setting changed to:', isEnabled);
        });
      }

      // Első látogatás visszaállítása gomb kezelése
      const resetFirstVisitBtn = document.getElementById('reset-first-visit-btn');
      if (resetFirstVisitBtn && window.welcomeScreenManager) {
        resetFirstVisitBtn.addEventListener('click', e => {
          e.stopPropagation();
          if (confirm('Biztosan visszaállítod az első látogatás állapotát? A következő oldal betöltésekor megjelenik az üdvözlő képernyő.')) {
            window.welcomeScreenManager.resetFirstVisit();
            alert('Első látogatás állapota visszaállítva! A következő oldal betöltésekor megjelenik az üdvözlő képernyő.');
          }
        });
      }

      // Nyelv radio button-ok kezelése
      const languageRadios = document.querySelectorAll('.general-language-card md-radio');
      languageRadios.forEach(radio => {
        radio.addEventListener('change', e => {
          // Ha ez a radio lett kiválasztva, a másikat kikapcsoljuk
          languageRadios.forEach(otherRadio => {
            if (otherRadio !== radio) {
              otherRadio.checked = false;
            }
          });

          // Fordítási rendszer integrálása
          if (window.translationManager && radio.checked) {
            const language = radio.value;
            console.log('Language radio changed to:', language);
            window.translationManager.switchLanguage(language);
          }
        });
      });

      // Nyelv kártyák kattinthatósága
      const languageCards = document.querySelectorAll('.general-language-card');
      languageCards.forEach(card => {
        card.addEventListener('click', e => {
          const radio = card.querySelector('md-radio');
          if (radio && !radio.checked) {
            radio.checked = true;
            // Trigger change event
            radio.dispatchEvent(new Event('change'));
          }
        });
      });

      // Hash változás figyelése
      window.addEventListener('hashchange', () => {
        const page = location.hash.substring(1) || 'general';
        console.log('Hash changed to:', page); // Debug
        showPage(page);
      });

      // Initial page load
      const initialPage = location.hash.substring(1) || 'general';
      console.log('Initial page:', initialPage); // Debug

      settingsPages.forEach(page => {
        page.style.display = 'none';
        page.style.visibility = 'hidden';
        page.style.opacity = '0';
        page.classList.remove('active');
      });

      // Minden kártya inaktívvá tétele
      settingsCards.forEach(card => {
        card.classList.remove('active');
      });

      showPage(initialPage);

      // Vissza gomb funkcionalitás
      const backBtn = document.getElementById('backToHome');
      if (backBtn) {
        backBtn.addEventListener('click', () => {
          // Ellenőrizzük, hogy van-e előző oldal a history-ban
          if (document.referrer && document.referrer !== window.location.href) {
            // Ha van referrer és nem ugyanaz az oldal, akkor visszamegyünk
            window.history.back();
          } else {
            // Ha nincs referrer, akkor alapértelmezett oldalra
            window.location.href = '/EU2K-Hub/index.html';
          }
        });
      }
    }

    // DOM betöltés után inicializálás
    document.addEventListener('DOMContentLoaded', initializeSettings);
  </script>
  <script src="/EU2K-Hub/assets/js/permissions.js"></script>
  <script src="/EU2K-Hub/assets/js/translations.js"></script>
  <script src="/EU2K-Hub/assets/js/welcome-screen.js"></script>
  <script src="/EU2K-Hub/assets/js/auth-state.js"></script>
  <script src="/EU2K-Hub/assets/js/test_firebase.js" type="module"></script>
<script src="/EU2K-Hub/assets/js/firebase-performance.js" type="module"></script>
  <script src="/EU2K-Hub/assets/js/first-input-delay.js"></script>
</head>

<body>
  <div class="app-bg">
    <aside class="sidebar">
      <nav class="nav-menu">
        <button class="nav-item list-button nav-item-list" type="button" aria-label="Menü">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/menu.svg" class="nav-icon" alt="Menü">
          </div>
          <span data-translate="navigation.menu">Menü</span>
        </button>
        <a class="nav-item" href="/EU2K-Hub/index.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/home.svg" class="nav-icon" alt="Otthon">
          </div>
          <span data-translate="navigation.home">Otthon</span>
        </a>
        <a class="nav-item" href="/EU2K-Hub/qr-code.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/qr_code.svg" class="nav-icon" alt="QR-Kód">
          </div>
          <span data-translate="navigation.qr">QR-Kód</span>
        </a>
        <a class="nav-item" href="/EU2K-Hub/youhub.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/youhub.svg" class="nav-icon" alt="YouHub">
          </div>
          <span data-translate="navigation.youhub">YouHub</span>
        </a>
        <a class="nav-item" href="/EU2K-Hub/event_hub.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/navbar/event_hub.svg" class="nav-icon" alt="Event Hub">
          </div>
          <span data-translate="navigation.event_hub">Event Hub</span>
        </a>
      </nav>
    </aside>
    <script>
      (function() {
        const sidebar = document.querySelector('.sidebar');
        const toggleButton = document.querySelector('.list-button');
        if (sidebar && toggleButton) {
          toggleButton.addEventListener('click', () => {
            sidebar.classList.toggle('open');
            const icon = toggleButton.querySelector('.nav-icon');
            if (icon) {
              const isOpen = sidebar.classList.contains('open');
              icon.src = isOpen ? '/EU2K-Hub/assets/navbar/menu_open.svg' : '/EU2K-Hub/assets/navbar/menu.svg';
            }
          });
        }
        function markActiveNavItem() {
          const currentPath = window.location.pathname.replace(/\/$/, '');
          document.querySelectorAll('.nav-menu .nav-item[href]').forEach(link => {
            try {
              const linkPath = new URL(link.getAttribute('href'), window.location.origin).pathname.replace(/\/$/, '');
              const isHomeAlias = currentPath === '/EU2K-Hub/' && linkPath === '/EU2K-Hub/index.html';
              if (linkPath === currentPath || isHomeAlias) {
                link.classList.add('active');
              } else {
                link.classList.remove('active');
              }
            } catch (e) {}
          });
        }
        function updateNavIcons() {
          document.querySelectorAll('.nav-item:not(.list-button) .nav-icon').forEach(img => {
            const item = img.closest('.nav-item');
            if (!item) return;
            const isActive = item.classList.contains('active');
            const src = img.getAttribute('src') || '';
            if (src.includes('/assets/navbar/')) {
              if (isActive && !src.includes('/assets/navbar/filled/')) {
                img.setAttribute('src', src.replace('/assets/navbar/', '/assets/navbar/filled/'));
              } else if (!isActive && src.includes('/assets/navbar/filled/')) {
                img.setAttribute('src', src.replace('/assets/navbar/filled/', '/assets/navbar/'));
              }
            }
          });
        }
        document.addEventListener('DOMContentLoaded', () => {
          markActiveNavItem();
          updateNavIcons();
        });
      })();
    </script>
    <main class="main-area">
      <div class="main-content">
        <div class="publish-layout">
          <div class="back-arrow-column">
            <md-filled-button id="backToHome" class="back-arrow-btn">
              <img src="/EU2K-Hub/assets/arrowback.svg" alt="Vissza" class="arrow-img">
            </md-filled-button>
          </div>
          <div class="publish-content">
            <header class="header">
              <div class="welcome-container">
                <img src="/EU2K-Hub/assets/settings_icon.svg" class="welcome-icon" alt="Settings">
                <h1 class="welcome-text" data-translate="pages.settings.title">Beállítások</h1>
              </div>
              <div class="header-icons">
                <a href="/EU2K-Hub/system/account.html" class="header-icon-link">
                  <img src="/EU2K-Hub/assets/account_icon.svg" class="header-icon" alt="Account">
                </a>
              </div>
            </header>

            <!-- Settings Content Layout -->
            <div class="settings-content-layout">
              <!-- Settings Navigation Cards -->
              <div class="settings-navigation" id="settings-navigation">
                <div class="settings-cards">
                  <!-- Általános -->
                  <div class="settings-card single-card active" data-page="general">
                    <img src="/EU2K-Hub/assets/settings_icons/general_icon.svg" class="settings-card-icon"
                      alt="Általános">
                    <div class="settings-card-content">
                      <div class="settings-card-title" data-translate="settings.general">Általános</div>
                      <div class="settings-card-desc" data-translate="settings.general_desc">Bétaverzió - Nyelv - Infó
                      </div>
                    </div>
                  </div>

                  <!-- Értesítések -->
                  <div class="settings-card group-top" data-page="notifications">
                    <img src="/EU2K-Hub/assets/settings_icons/notifications_icon.svg" class="settings-card-icon"
                      alt="Értesítések">
                    <div class="settings-card-content">
                      <div class="settings-card-title" data-translate="settings.notifications">Értesítések</div>
                      <div class="settings-card-desc" data-translate="settings.notifications_desc">Kategóriák</div>
                    </div>
                    <div class="settings-card-divider"></div>
                    <md-switch icons selected></md-switch>
                  </div>

                  <!-- Statisztikák és Teljesítmény -->
                  <div class="settings-card group-bottom" data-page="stats">
                    <img src="/EU2K-Hub/assets/settings_icons/statistics_and_performance_icon.svg"
                      class="settings-card-icon" alt="Statisztikák">
                    <div class="settings-card-content">
                      <div class="settings-card-title" data-translate="settings.stats">Statisztikák és Teljesítmény
                      </div>
                      <div class="settings-card-desc" data-translate="settings.stats_desc">Teljesítmények megjelenítése
                      </div>
                    </div>
                  </div>

                  <!-- Közösség -->
                  <div class="settings-card group-top" data-page="community">
                    <img src="/EU2K-Hub/assets/settings_icons/community_icon.svg" class="settings-card-icon"
                      alt="Közösség">
                    <div class="settings-card-content">
                      <div class="settings-card-title" data-translate="settings.community">Közösség</div>
                      <div class="settings-card-desc" data-translate="settings.community_desc">Kurzusok -
                        Csoporttagságok</div>
                    </div>
                  </div>

                  <!-- Események és Naptár -->
                  <div class="settings-card group-middle" data-page="events">
                    <img src="/EU2K-Hub/assets/settings_icons/events_and_calendar_icon.svg" class="settings-card-icon"
                      alt="Események">
                    <div class="settings-card-content">
                      <div class="settings-card-title" data-translate="settings.events_calendar">Események és Naptár
                      </div>
                      <div class="settings-card-desc" data-translate="settings.events_desc">Események</div>
                    </div>
                  </div>

                  <!-- Kísérletek -->
                  <div class="settings-card group-bottom" data-page="experiments">
                    <img src="/EU2K-Hub/assets/settings_icons/experiments_page/experiments.svg"
                      class="settings-card-icon" alt="Kísérletek">
                    <div class="settings-card-content">
                      <div class="settings-card-title" data-translate="settings.experiments_title">Kísérletek</div>
                      <div class="settings-card-desc" data-translate="settings.experiments_desc">Üdvözlő képernyő</div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Vertical Divider -->
              <div class="settings-vertical-divider"></div>

              <!-- Settings Pages -->
              <div class="settings-pages">
                <div id="general-page" class="settings-page active general-page">
                  <!-- Weboldal bétaverziójának használata -->
                  <div class="general-beta-card">
                    <span class="general-beta-text" data-translate="settings.beta_usage">Weboldal bétaverziójának
                      használata</span>
                    <md-switch icons selected disabled></md-switch>
                  </div>

                  <!-- Nyelv kártya -->
                  <div class="general-language-container">
                    <div class="general-language-title" data-translate="settings.language_title">Nyelv</div>
                    <div class="general-language-cards">
                      <!-- English kártya -->
                      <div class="general-language-card">
                        <div class="general-language-content">
                          <img src="/EU2K-Hub/assets/settings_icons/general_page/english.png"
                            class="general-language-flag" alt="English">
                          <span class="general-language-text" data-translate="settings.language_english">English</span>
                        </div>
                        <md-radio name="language" value="en"></md-radio>
                      </div>

                      <!-- Magyar kártya -->
                      <div class="general-language-card">
                        <div class="general-language-content">
                          <img src="/EU2K-Hub/assets/settings_icons/general_page/hungarian.png"
                            class="general-language-flag" alt="Magyar">
                          <span class="general-language-text" data-translate="settings.language_hungarian">Magyar</span>
                        </div>
                        <md-radio name="language" value="hu" checked></md-radio>
                      </div>
                    </div>
                  </div>

                  <!-- Információs kártya -->
                  <div class="general-info-card">
                    <!-- Bal oszlop -->
                    <div class="general-info-column">
                      <div class="general-info-item">
                        <img src="/EU2K-Hub/assets/eu2khub_logo.png" class="general-info-logo" alt="EU2K Hub">
                      </div>
                      <div class="general-info-item">
                        <img src="/EU2K-Hub/assets/settings_icons/version.svg" class="general-info-icon" alt="Verzió">
                        <span class="general-info-text" data-translate="settings.version">Verzió: 1.0</span>
                      </div>
                      <div class="general-info-item">
                        <img src="/EU2K-Hub/assets/settings_icons/channel.svg" class="general-info-icon" alt="Csatorna">
                        <span class="general-info-text" data-translate="settings.channel">Csatorna: Béta</span>
                      </div>
                    </div>

                    <!-- Divider -->
                    <div class="general-info-divider"></div>

                    <!-- Középső oszlop -->
                    <div class="general-info-column">
                      <div class="general-info-item">
                        <img src="/EU2K-Hub/assets/settings_icons/ui_version.svg" class="general-info-icon"
                          alt="UI Verzió">
                        <span class="general-info-text" data-translate="settings.ui_version">UI Verzió: Material 3
                          Expressive</span>
                      </div>
                      <div class="general-info-item">
                        <img src="/EU2K-Hub/assets/settings_icons/stands_behind.svg" class="general-info-icon"
                          alt="Mögötte áll">
                        <span class="general-info-text" data-translate="settings.stands_behind">Mögötte áll még: EU2K
                          DÖK, EU2K Devs</span>
                      </div>
                      <div class="general-info-item">
                        <img src="/EU2K-Hub/assets/settings_icons/made_by.svg" class="general-info-icon"
                          alt="Készítette">
                        <span class="general-info-text" data-translate="settings.made_by">Készítette: Turoczi Ádám
                          8.E</span>
                      </div>
                      <div class="general-info-item">
                        <img src="/EU2K-Hub/assets/settings_icons/organization.svg" class="general-info-icon"
                          alt="Szervezet">
                        <span class="general-info-text" data-translate="settings.organization">Európa 2000 Gimnázium
                          Tulajdona</span>
                      </div>
                    </div>

                    <!-- Jobb oszlop -->
                    <div class="general-info-column">
                      <div class="general-info-item">
                        <img src="/EU2K-Hub/assets/eu2kdevs_logo.png" class="general-info-logo-devs" alt="EU2K Devs">
                      </div>
                    </div>
                  </div>
                </div>

                <div id="notifications-page" class="settings-page">
                  <!-- Notice kártya -->
                  <div class="notifications-notice">
                    <img src="/EU2K-Hub/assets/settings_icons/notifications_page/info.svg" class="notice-icon"
                      alt="Info">
                    <span class="notice-text" data-translate="settings.notifications_notice">Amíg az iskolában vagy,
                      csendes értesítéseket fogsz kapni.</span>
                  </div>

                  <!-- Kategóriák kártya -->
                  <div class="notifications-categories-card">
                    <div class="categories-title" data-translate="settings.categories">Kategóriák</div>

                    <div class="category-items">
                      <!-- Hírek -->
                      <div class="category-item first">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/news.svg" class="category-icon"
                          alt="Hírek">
                        <span class="category-text" data-translate="settings.news">Hírek</span>
                        <md-switch icons selected></md-switch>
                      </div>

                      <!-- Kurzusok -->
                      <div class="category-item middle">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/courses.svg" class="category-icon"
                          alt="Kurzusok">
                        <span class="category-text" data-translate="settings.courses">Kurzusok</span>
                        <md-switch icons selected></md-switch>
                      </div>

                      <!-- Események -->
                      <div class="category-item middle">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/events.svg" class="category-icon"
                          alt="Események">
                        <span class="category-text" data-translate="settings.events">Események</span>
                        <md-switch icons selected></md-switch>
                      </div>

                      <!-- Üzenetek -->
                      <div class="category-item middle">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/messages.svg" class="category-icon"
                          alt="Üzenetek">
                        <span class="category-text" data-translate="settings.messages">Üzenetek</span>
                        <md-switch icons disabled></md-switch>
                      </div>

                      <!-- Posztok -->
                      <div class="category-item middle">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/posts.svg" class="category-icon"
                          alt="Posztok">
                        <span class="category-text" data-translate="settings.posts">Posztok</span>
                        <md-switch icons disabled></md-switch>
                      </div>

                      <!-- Meghívók -->
                      <div class="category-item middle">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/invites.svg" class="category-icon"
                          alt="Meghívók">
                        <span class="category-text" data-translate="settings.invites">Meghívók</span>
                        <md-switch icons disabled></md-switch>
                      </div>

                      <!-- Bétaverzió -->
                      <div class="category-item middle">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/beta_version.svg"
                          class="category-icon" alt="Bétaverzió">
                        <span class="category-text" data-translate="settings.beta_version">Bétaverzió</span>
                        <md-switch icons selected></md-switch>
                      </div>

                      <!-- Újdonságok -->
                      <div class="category-item middle">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/new_things.svg"
                          class="category-icon" alt="Újdonságok">
                        <span class="category-text" data-translate="settings.new_things">Újdonságok</span>
                        <md-switch icons selected></md-switch>
                      </div>

                      <!-- Csengő -->
                      <div class="category-item last">
                        <img src="/EU2K-Hub/assets/settings_icons/notifications_page/bell.svg" class="category-icon"
                          alt="Csengő">
                        <span class="category-text" data-translate="settings.bell">Csengő</span>
                        <md-switch icons disabled></md-switch>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="stats-page" class="settings-page">
                  <h2 data-translate="settings.stats">Statisztikák és Teljesítmény</h2>
                  <p data-translate="settings.stats_not_available">Ez a részleg bétában nem elérhető, nagyon erősen
                    dolgozunk rajta, hogy minél hamarabb elérhető
                    legyen.</p>
                </div>

                <div id="community-page" class="settings-page">
                  <!-- Kurzusaim kártya -->
                  <div class="community-courses-card">
                    <div class="community-card-title" data-translate="settings.my_courses">Kurzusaim:</div>
                    <div class="community-no-courses">
                      <img src="/EU2K-Hub/assets/settings_icons/community_page/block.svg" class="community-block-icon"
                        alt="Block">
                      <div class="community-no-courses-text">
                        <div data-translate="settings.courses_unavailable_line1">A Kurzusok funkció ebben a verzióban
                        </div>
                        <div data-translate="settings.courses_unavailable_line2">nem érhető még el.</div>
                      </div>
                    </div>
                  </div>

                  <!-- Javaslataim kártya -->
                  <div class="community-suggestions-card">
                    <div class="community-card-title" data-translate="settings.my_suggestions">Javaslataim:</div>
                    <div class="community-suggestion-items">
                      <div class="community-suggestion-item first">
                        <span class="community-suggestion-text" data-translate="settings.suggestion1">Puffy, felfújt
                          ikonok készítése</span>
                        <div class="community-suggestion-arrow">
                          <img src="/EU2K-Hub/assets/settings_icons/community_page/arrow_right.svg"
                            class="community-arrow-icon" alt="Arrow">
                        </div>
                      </div>
                      <div class="community-suggestion-item middle">
                        <span class="community-suggestion-text" data-translate="settings.suggestion2">A tökéletes prompt
                          a tanuláshoz</span>
                        <div class="community-suggestion-arrow">
                          <img src="/EU2K-Hub/assets/settings_icons/community_page/arrow_right.svg"
                            class="community-arrow-icon" alt="Arrow">
                        </div>
                      </div>
                      <div class="community-suggestion-item last">
                        <span class="community-suggestion-text" data-translate="settings.suggestion3">Hogyan készíts
                          élethű képeket</span>
                        <div class="community-suggestion-arrow">
                          <img src="/EU2K-Hub/assets/settings_icons/community_page/arrow_right.svg"
                            class="community-arrow-icon" alt="Arrow">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="events-page" class="settings-page">
                  <div class="events-page-off">
                    <img src="/EU2K-Hub/assets/settings_icons/qm.svg" class="community-block-icon"
                        alt="Question Mark">
                    <div class="events-and-calendar-uc">
                      <div class="title-text" data-translate="settings.events_calendar">Események és Naptár
                      </div>
                      <div data-translate="settings.events_not_available">Ez a részleg bétában nem elérhető, de nagyon erősen dolgozunk rajta, hogy minél hamarabb elérhető legyen.
                      </div>
                    </div>
                  </div>
                </div>

                <div id="experiments-page" class="settings-page">
                  <div class="general-beta-card-first">
                    <span class="general-beta-text" data-translate="settings.experiments-welcome-screen">Üdvözlő
                      Képernyő</span>
                    <md-switch id="welcome-screen-switch" icons disabled selected></md-switch>
                  </div>

                  <!-- Tesztelési gomb az első látogatás visszaállításához -->
                  <div class="general-beta-card-last" style="margin-top: 16px;">
                    <span class="general-beta-text" data-translate="settings.experiments-reset-onboarding">Bevezető helyreállítása</span>
                    <md-filled-button disabled id="reset-first-visit-btn" data-translate="settings.experiments-reset" style="margin-left: auto;">
                      Helyreállítás
                    </md-filled-button>
                  </div>

                  <div class="general-beta-card">
                    <span class="general-beta-text" data-translate="settings.experiments-youhub">YouHub</span>
                    <md-switch id="welcome-screen-switch" icons disabled></md-switch>
                  </div>

                  <div class="general-beta-card">
                    <span class="general-beta-text" data-translate="settings.experiments-test-mode">Teszt Mód</span>
                    <md-filled-button id="enterTestMode" data-translate="settings.experiments-enter-test-mode" style="margin-left: auto;">
                      Belépés
                    </md-filled-button>
                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id="site-footer" class="footer" aria-label="Site footer">
        <div class="footer-container">
          <div class="footer-left">
            <img src="/EU2K-Hub/eu2k_hub_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Hub Logó">
          </div>
          <div class="footer-center">
            <a class="footer-privacy" data-translate="pages.index.privacy_policy" href="/EU2K-Hub/privacy_policy.html">Adatkezelési Tájékoztató</a>
            <a class="footer-privacy" data-translate="pages.index.terms_of_service" href="/EU2K-Hub/terms_of_service.html">Használati Feltételek</a>
          </div>
          <div class="footer-right">
            <img src="/EU2K-Hub/eu2k_devs_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Devs Logó">
            <img src="/EU2K-Hub/eu2k_dok_logo_hor_dark_smoller_by_width.png" class="footer-logo-wide" alt="EU2K DÖK Logó">
          </div>
        </div>
    </main>
    </div>
  </div>
<script type="module" src="/EU2K-Hub/assets/js/new-things-popup.js"></script>
<script>
  function applySettingsSmall() {
    const nav = document.getElementById('settings-navigation');
    if (!nav) return;

    const cardsContainer = nav.querySelector('.settings-cards');
    const cards = nav.querySelectorAll('.settings-card');

    if (document.body.clientWidth <= 1100) {
      // Navigation és container
      nav.classList.add('settings-navigation-small');
      cardsContainer.classList.add('settings-cards-small');

      // Minden kártya
      cards.forEach(card => {
        card.classList.add('settings-card-small');

        // Tartalom elemek
        card.querySelector('.settings-card-content')?.classList.add('settings-card-content-small');
        card.querySelector('.settings-card-title')?.classList.add('settings-card-title-small');
        card.querySelector('.settings-card-desc')?.classList.add('settings-card-desc-small');
        card.querySelector('.settings-card-divider')?.classList.add('settings-card-divider-small');

        // ÚJ: ikonok
        card.querySelector('.settings-card-icon')?.classList.add('settings-card-icon-small');

        // md-switch
        const mdSwitch = card.querySelector('md-switch');
        if (mdSwitch) mdSwitch.classList.add('settings-card-small');
      });

    } else {
      // visszaállítás
      nav.classList.remove('settings-navigation-small');
      cardsContainer.classList.remove('settings-cards-small');

      cards.forEach(card => {
        card.classList.remove('settings-card-small');
        card.querySelector('.settings-card-content')?.classList.remove('settings-card-content-small');
        card.querySelector('.settings-card-title')?.classList.remove('settings-card-title-small');
        card.querySelector('.settings-card-desc')?.classList.remove('settings-card-desc-small');
        card.querySelector('.settings-card-divider')?.classList.remove('settings-card-divider-small');
        card.querySelector('.settings-card-icon')?.classList.remove('settings-card-icon-small');
        const mdSwitch = card.querySelector('md-switch');
        if (mdSwitch) mdSwitch.classList.remove('settings-card-small');
      });
    }
  }

  // Figyelés: resize + 1 másodpercenként
  window.addEventListener('resize', applySettingsSmall);
  setInterval(applySettingsSmall, 1000);
  applySettingsSmall(); // első alkalmazás betöltéskor
</script>
<script>
  function styleAllSettingsPages() {
    // Kiválaszt minden settings-page elemet
    const pages = document.querySelectorAll('.settings-pages .settings-page');

    pages.forEach(page => {
      page.style.borderRadius = '32px';
      page.style.overflowY = 'auto';
      page.style.scrollBehavior = 'smooth';

      // 💚 Hover/scroll esemény figyelés
      let scrollTimeout;
      page.addEventListener('mouseenter', () => {
        page.classList.add('show-scrollbar');
      });
      page.addEventListener('mouseleave', () => {
        page.classList.remove('show-scrollbar');
      });
      page.addEventListener('scroll', () => {
        page.classList.add('show-scrollbar');
        clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(() => {
          page.classList.remove('show-scrollbar');
        }, 1000);
      });
    });

    // Scrollbar stílus
    const styleEl = document.createElement('style');
    styleEl.innerHTML = `
      .settings-pages .settings-page::-webkit-scrollbar {
        width: 8px;
        background: transparent;
      }

      .settings-pages .settings-page::-webkit-scrollbar-thumb {
        background-color: transparent;
        border-radius: 8px;
        transition: background-color 0.3s ease;
      }

      /* amikor hoverel vagy scrolloL */
      .settings-pages .settings-page.show-scrollbar::-webkit-scrollbar-thumb {
        background-color: #1E2A1E;
      }

      .settings-pages .settings-page.show-scrollbar::-webkit-scrollbar-thumb:hover {
        background-color: #243424;
      }
    `;
    document.head.appendChild(styleEl);
  }

  // Lefut oldalbetöltés után
  document.addEventListener('DOMContentLoaded', styleAllSettingsPages);
</script>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const btn = document.getElementById('enterTestMode');
    if (btn) {
      btn.addEventListener('click', () => {
        // Új lapon nyitja meg
        window.open('/EU2K-Hub/test-channel/', '_blank');
      });
    }
  });
</script>
</body>
</html>
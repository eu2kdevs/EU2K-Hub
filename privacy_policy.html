<!DOCTYPE html>
<html lang="hu">

<head>
  <meta charset="UTF-8">
  <title data-translate="pages.privacy.title">Privacy Policy</title>
  <script>
    (function(){
      if (!document.getElementById('eu2k-page-overlay')) {
        var o = document.createElement('div');
        o.id = 'eu2k-page-overlay';
        o.style.cssText = 'position:fixed;inset:0;z-index:9999;background:#0B0F0B;border-radius:32px;opacity:1;transition:opacity 300ms ease-in-out;';
        var inner = document.createElement('div');
        inner.style.cssText = 'position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background:#0B0F0B;border-radius:32px;';
        var m = document.createElement('div');
        m.id = 'eu2k-overlay-mount';
        m.style.cssText = 'position:relative;width:100%;height:100%';
        inner.appendChild(m);
        o.appendChild(inner);
        document.documentElement.appendChild(o);
      }
    })();
  </script>
  <script src="/EU2K-Hub/assets/js/page-overlay-loader.js"></script>
  <link rel="stylesheet" href="privacy_policy.css">
  <link rel="icon" href="/EU2K-Hub/favicon.ico">
  <script type="importmap">
    {
      "imports": {
        "@material/web/": "https://esm.run/@material/web/"
      }
    }
  </script>
  <script type="module">
    import '@material/web/all.js';
    import { styles as typescaleStyles } from '@material/web/typography/md-typescale-styles.js';

    document.adoptedStyleSheets.push(typescaleStyles.styleSheet);
  </script>
  <script src="/EU2K-Hub/assets/js/permissions.js"></script>
  <script src="/EU2K-Hub/assets/js/translations.js"></script>
  <script src="/EU2K-Hub/assets/js/auth-state.js"></script>
  <script src="/EU2K-Hub/assets/js/test_firebase.js"></script>
  <script src="/EU2K-Hub/assets/js/firebase-performance.js"></script>
  <script src="/EU2K-Hub/assets/js/first-input-delay.js"></script>
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-app.js";
    import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-analytics.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js";

    // Your web app's Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyBRRVx6BtQtCDKjFYA8yh9qYrcUONmkkwI",
      authDomain: "eu2k-hub.firebaseapp.com",
      projectId: "eu2k-hub",
      storageBucket: "eu2k-hub.firebasestorage.app",
      messagingSenderId: "560244867055",
      appId: "1:560244867055:web:3cd51b85baead94989001a",
      measurementId: "G-2JDPR089WD"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const analytics = getAnalytics(app);
    const db = getFirestore(app);

    // Make db globally available
    window.db = db;

    // Import Firestore debug module
    import('./assets/js/firestore-debug.js').catch(err => {
      console.warn('Firestore debug module not loaded:', err);
    });
  </script>
</head>

<body>
  <div class="app-bg">
    <aside class="sidebar">
      <nav class="nav-menu">
        <a class="nav-item" href="index.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/home_icon.svg" class="nav-icon" alt="Otthon">
          </div>
          <span data-translate="navigation.home">Otthon</span>
        </a>
        <a class="nav-item" href="qr-code.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/qr_code_icon.svg" class="nav-icon" alt="QR-Kód">
          </div>
          <span data-translate="navigation.qr">QR-Kód</span>
        </a>
        <a class="nav-item" href="youhub.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/youhub_icon.svg" class="nav-icon" alt="YouHub">
          </div>
          <span data-translate="navigation.youhub">YouHub</span>
        </a>
        <a class="nav-item" href="event_hub.html">
          <div class="nav-icon-container">
            <img src="/EU2K-Hub/assets/event_hub_icon.svg" class="nav-icon" alt="Event Hub">
          </div>
          <span data-translate="navigation.event_hub">Event Hub</span>
        </a>
      </nav>
    </aside>
    <main class="main-area">
      <div class="main-content">
        <header class="header">
          <div class="welcome-container">
            <img src="/EU2K-Hub/assets/privacy_policy.svg" class="privacy-icon" alt="Event Hub" style="margin-bottom: 4px;">
            <h1 class="privacy-text" data-translate="pages.privacy.title" style="margin-top: 0; margin-bottom: 4px;">Privacy Policy</h1>
          </div>
          <div class="header-icons">
            <a href="/EU2K-Hub/system/account.html" class="header-icon-link">
              <img src="/EU2K-Hub/assets/account_icon.svg" class="header-icon" alt="Account">
            </a>
            <a href="/EU2K-Hub/settings/settings.html" class="header-icon-link">
              <img src="/EU2K-Hub/assets/settings_icon.svg" class="header-icon" alt="Settings">
            </a>
          </div>
        </header>
        <section id="privacy-policy-page" class="hash-page" style="min-height: 200px;">
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title data-translate="pages.privacy.title">EU2K Hub - Adatvédelmi Irányelvek</title>
            <style>
              h1, h2 {
                color: #BDC9B9;
              }
              h1 {
                text-align: center;
                margin-bottom: 1rem;
              }
              ul {
                margin-left: 1.5rem;
              }
              footer {
                margin-top: 3rem;
                font-size: 0.9rem;
                color: #666;
                text-align: center;
              }
            </style>
          </head>
          <body>
              <p class="last-modified-notice"><strong data-translate-html="pages.privacy_policy.effective_date">Hatálybalépés dátuma:</strong> </p>

            <div class="category-items">
              <div class="category-item first">
                <h2 data-translate="pages.privacy_policy.intro_title">1. Bevezetés</h2>
                <p data-translate="pages.privacy_policy.intro_text">
                  Az EU2K Hub egy iskolai közösségi és információs platform, amely célja, hogy egyszerűbbé és
                  élvezetesebbé tegye a diákok, tanárok és szülők mindennapjait. Adataink kezelésében
                  átláthatóságra és biztonságra törekszünk, miközben barátságos és felhasználóbarát környezetet
                  biztosítunk.
                </p>
              </div>

              <div class="category-item middle">
                <h2 data-translate="pages.privacy_policy.data_collection_title">2. Milyen adatokat gyűjtünk?</h2>
                <ul>
                  <li data-translate-html="pages.privacy_policy.data_collection_1"><strong>Profiladataid:</strong> Microsoft, Google vagy Apple fiók alapinformációi (név, e-mail, profilkép).</li>
                  <li data-translate-html="pages.privacy_policy.data_collection_2"><strong>Iskolai adatok:</strong> osztályod neve, osztálytársak és tanárok nevei, elérhetőségei, jegyek, órarend, dolgozatok.</li>
                  <li data-translate-html="pages.privacy_policy.data_collection_3"><strong>Közösségi tartalmak:</strong> posztok, hozzászólások, szavazások, események.</li>
                  <li data-translate-html="pages.privacy_policy.data_collection_4"><strong>Extra funkciókhoz kapcsolódó adatok:</strong> például emlékek a Memories Hubban, statisztikák a School Wrappedből, osztály- és csoportinfók.</li>
                </ul>
              </div>

              <div class="category-item middle">
                <h2 data-translate="pages.privacy_policy.data_usage_title">3. Hogyan használjuk az adatokat?</h2>
                <p data-translate="pages.privacy_policy.data_usage_text">
                  Az adatokat kizárólag az iskolai élet szervezésére, kommunikációra és közösségi funkciók
                  biztosítására használjuk. Nem adjuk el és nem osztjuk meg őket külső cégekkel kereskedelmi
                  célokra.
                </p>
              </div>

              <div class="category-item middle">
                <h2 data-translate="pages.privacy_policy.data_access_title">4. Kik férhetnek hozzá az adatokhoz?</h2>
                <p data-translate="pages.privacy_policy.data_access_text">
                  Az adatokhoz kizárólag az arra jogosult diákok, tanárok és rendszergazdák férhetnek hozzá.
                  Bizonyos funkciók (pl. osztályprofil) esetében a közösség tagjai közösen szerkeszthetik a
                  tartalmat.
                </p>
              </div>

              <div class="category-item middle">
                <h2 data-translate="pages.privacy_policy.data_security_title">5. Hogyan védjük az adataidat?</h2>
                <p data-translate="pages.privacy_policy.data_security_text">
                  Az EU2K Hub modern biztonsági technológiákat használ az adatok védelmére. Az adatokhoz való
                  hozzáférést szigorúan korlátozzuk, és minden bejelentkezés hitelesített Microsoft, Google vagy
                  Apple fiókon keresztül történik.
                </p>
              </div>

              
              <div class="category-item middle">
                <h2 data-translate="pages.privacy_policy.data_rights_title">6. Milyen jogok illetnek meg téged?</h2>
                <p data-translate="pages.privacy_policy.data_rights_text">
                  Jogod van hozzáférni az adataidhoz, kijavítani őket, kérni a törlésüket, valamint korlátozni
                  bizonyos felhasználásukat. Ha bármilyen kérdésed vagy kétséged van, bármikor felveheted velünk
                  a kapcsolatot.
                </p>
              </div>

              <div class="category-item last">
                <h2 data-translate="pages.privacy_policy.data_contact_title">7. Kapcsolat</h2>
                <p data-translate-html="pages.privacy_policy.data_contact_text">
                  Ha kérdésed van az adatvédelemmel kapcsolatban, írj nekünk az alábbi e-mail címre:
                  <a href="mailto:turoczi.adam@europa2000.hu">turoczi.adam@europa2000.hu</a>
                </p>
              </div>
            </div>
            <footer class="footer-privacy" data-translate="pages.privacy_policy.footer_text">
              &copy; 2025 EU2K Hub – Minden jog fenntartva.
            </footer>
          </body>
      </section>
       </div>
        <div id="site-footer" class="footer" aria-label="Site footer">
        <div class="footer-container">
          <div class="footer-left">
            <img src="/EU2K-Hub/eu2k_hub_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Hub Logó">
          </div>
          <div class="footer-center">
            <a class="footer-privacy" data-translate="pages.index.terms_of_service" href="/EU2K-Hub/terms_of_service.html">Használati Feltételek</a>
          </div>
          <div class="footer-right">
            <img src="/EU2K-Hub/eu2k_devs_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Devs Logó">
            <img src="/EU2K-Hub/eu2k_dok_logo_hor_dark_smoller_by_width.png" class="footer-logo-wide" alt="EU2K DÖK Logó">
          </div>
        </div>
      </div>
    </main>
  </div>
  <div id="event-mask"></div>

  <script>
    // Feedback gomb és popup kezelése
    const feedbackButton = document.querySelector('.feedback-button'); // Changed to querySelector
    const feedbackPopup = document.getElementById('feedbackPopup');

    if (feedbackButton && feedbackPopup) {
      // Feedback popup megnyitása
      feedbackButton.addEventListener('click', () => {
        feedbackPopup.style.display = 'flex';
        feedbackPopup.classList.remove('closing');
      });

      // Popup bezárása overlay-re kattintáskor
      feedbackPopup.addEventListener('click', (e) => {
        if (e.target === feedbackPopup) {
          closeFeedbackPopup();
        }
      });
    }

    // Bezáró függvény animációval
    function closeFeedbackPopup() {
      const feedbackPopup = document.getElementById('feedbackPopup');
      if (feedbackPopup) {
        feedbackPopup.classList.add('closing');
        setTimeout(() => {
          feedbackPopup.style.display = 'none';
          feedbackPopup.classList.remove('closing');
        }, 300); // 300ms animáció után bezárás
      }
    }

    // Kategória gombok kezelése
    const feedbackCategoryBtns = document.querySelectorAll('.feedback-category-btn');
    feedbackCategoryBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        // Eltávolítjuk az active osztályt minden gombról
        feedbackCategoryBtns.forEach(b => b.classList.remove('active'));
        // Hozzáadjuk az active osztályt az aktuális gombhoz
        btn.classList.add('active');
      });
    });

    // Feedback beküldés függvény
    async function submitFeedback() {
      try {
        // Form adatok összegyűjtése
        const titleInput = document.querySelector('.feedback-title-input');
        const descriptionInput = document.querySelector('.feedback-input');
        const activeCategory = document.querySelector('.feedback-category-btn.active');

        // Validáció
        if (!titleInput.value.trim()) {
          showToast('Kérlek add meg a címet!', 'error');
          return;
        }
        if (!descriptionInput.value.trim()) {
          showToast('Kérlek írj le valamit!', 'error');
          return;
        }
        if (!activeCategory) {
          showToast('Kérlek válassz kategóriát!', 'error');
          return;
        }

        // Kategória meghatározása
        const categoryData = activeCategory.getAttribute('data-category');
        const collectionName = categoryData === 'function' ? 'fix_things' : 'new_recommendations';

        // Firestore v9 függvények importálása
        const { collection, doc, getDocs, setDoc, serverTimestamp } = await import("https://www.gstatic.com/firebasejs/11.10.0/firebase-firestore.js");

        // Következő dokumentum ID meghatározása
        const collectionRef = collection(db, 'homePageData', 'feedback', collectionName);
        const snapshot = await getDocs(collectionRef);

        let nextId = 1;
        if (!snapshot.empty) {
          const docIds = snapshot.docs.map(docSnapshot => parseInt(docSnapshot.id)).filter(id => !isNaN(id));
          if (docIds.length > 0) {
            nextId = Math.max(...docIds) + 1;
          }
        }

        // Új feedback dokumentum létrehozása
        const feedbackData = {
          title: titleInput.value.trim(),
          description: descriptionInput.value.trim(),
          class: '8.E', // Hardcoded amíg nincs Firebase Auth - utána jobDescription lesz
          timestamp: serverTimestamp()
        };

        const newDocRef = doc(collectionRef, nextId.toString());
        await setDoc(newDocRef, feedbackData);

        // Sikeres beküldés - toast megjelenítése
        showToast('✓ Sikeresen beküldted a visszajelzést!', 'success');

        // Form resetelése
        titleInput.value = '';
        descriptionInput.value = '';

        // Popup bezárása
        closeFeedbackPopup();

      } catch (error) {
        console.error('Hiba a feedback beküldésekor:', error);
        showToast('Hiba történt a beküldés során. Próbáld újra!', 'error');
      }
    }

    // Általános toast megjelenítő függvény
    function showToast(message, type = 'success') {
      // Meglévő toast eltávolítása
      const existingToast = document.querySelector('.feedback-toast');
      if (existingToast) {
        existingToast.remove();
      }

      // Új toast létrehozása
      const toast = document.createElement('div');
      toast.className = `feedback-toast ${type}`;
      toast.textContent = message;
      document.body.appendChild(toast);

      // Megjelenítés
      setTimeout(() => toast.classList.add('show'), 10);

      // 3 másodperc után eltűnik
      setTimeout(() => {
        toast.classList.remove('show');
        toast.classList.add('hide');

        setTimeout(() => {
          toast.remove();
        }, 300);
      }, 3000);
    }
  </script>
  <div id="site-footer" class="footer" aria-label="Site footer">
    <div class="footer-container">
      <div class="footer-left">
        <img src="/EU2K-Hub/eu2k_hub_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Hub Logó">
      </div>
      <div class="footer-center">
        <a class="footer-privacy" data-translate="pages.index.privacy_policy" href="/EU2K-Hub/privacy_policy.html">Adatkezelési Tájékoztató</a>
            <a class="footer-privacy" data-translate="pages.index.terms_of_service" href="/EU2K-Hub/terms_of_service.html">Használati Feltételek</a>
      </div>
      <div class="footer-right">
        <img src="/EU2K-Hub/eu2k_devs_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K Devs Logó">
        <img src="/EU2K-Hub/eu2k_dok_logo_hor_dark.png" class="footer-logo-wide" alt="EU2K DÖK Logó">
      </div>
    </div>
  </div>
</body>

</html>